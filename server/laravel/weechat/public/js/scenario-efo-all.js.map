{"version":3,"sources":["scenario_efo.js","validation.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACv/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scenario-efo-all.js","sourcesContent":["//globe variable\r\nvar common_data         = [];\r\nvar type_text           = 'text';\r\nvar type_tel            = 'phone';\r\nvar type_tel_no_hyphen  = 'no_hyphen';\r\nvar type_password       = 'password';\r\nvar type_password_confirm = 'password_confirm';\r\nvar type_input          = 'input';\r\nvar type_textarea       = 'textarea';\r\nvar type_radio          = 'radio';\r\nvar type_checkbox       = 'checkbox';\r\nvar type_pulldown       = 'pulldown';\r\nvar type_postal_code    = 'postal_code';\r\nvar type_terms_of_use   = 'terms_of_use';\r\nvar type_confirmation   = 'confirmation';\r\nvar type_file           = 'file';\r\nvar type_calendar       = 'calendar';\r\nvar type_calendar_select = 'select';\r\nvar type_calendar_embed = 'embed';\r\nvar type_calendar_period_of_time = 'period_of_time';\r\nvar type_mail           = 'mail';\r\nvar type_mail_confirm   = 'email_confirm';\r\nvar type_scenario_connect = 'scenario_connect';\r\nvar type_carousel = 'carousel';\r\nvar type_birthday = 'brithday';\r\nvar type_birthday_y_m = 'brithday_y_m';\r\nvar type_image_radio = 'image_radio';\r\nvar type_date = 'date';\r\nvar type_time = 'time';\r\nvar type_date_time = 'date_time';\r\nvar type_customize = 'customize';\r\nvar type_period_of_time = 'period_of_time';\r\nvar type_period_of_day = 'period_of_day';\r\nvar type_card_payment = 'card_payment';\r\nvar type_captcha = 'captcha';\r\nvar type_add_to_cart = 'add_to_cart';\r\nvar type_request_document = 'request_document';\r\nvar type_provinces_of_japan = 'the_provinces_of_japan';\r\nvar type_towns_and_villages_of_japan = 'towns_and_villages';\r\nvar type_month_date = 'month_date';\r\nvar type_captcha_only_numbers = 'only_numbers';\r\nvar type_captcha_only_letters = 'only_letters';\r\nvar type_detail_content = 'detail_content';\r\nvar list_text_button_next = ['Next', '次へ'];\r\nvar bot_lang_ja = 'ja';\r\nvar text_button_ja = '次へ';\r\nvar text_button = 'Next';\r\nvar type_image_document = 'image_title_subtitle';\r\nvar type_title_document = 'title_only';\r\n\r\nvar no_label = '001';\r\nvar label = '002';\r\nvar type_textarea_input = '001';\r\nvar min_radio_item      = 1;\r\nvar min_checkbox_item   = 1;\r\nvar max_generic_item    = 10;\r\nvar max_generic_button  = 3;\r\nvar icheck_change_event = true;\r\nvar is_call_icheck = true;\r\n\r\n//message type active\r\nvar message_type_bot = false;\r\n\r\n$(function () {\r\n    message_area_select(null);\r\n\r\n    ///////////////////////START ACTION USER MESAGE\r\n    //get type of bot input textarea\r\n    $('.scenario-body').on('click', '.user_scenario', function (event) {\r\n        message_type_bot = false;\r\n        //hide message bot area\r\n        message_area_select(false);\r\n        var messages_focus      = $('input.messages_focus'),\r\n            user_message_name   = $(this).find('.messages_bot_content').attr('name'),\r\n            filter_messages_focus = $('input.filter_messages_focus'),\r\n            filter_message_name    = $(this).find('.filter_content ').attr('name');\r\n        // if (messages_focus.val() != user_message_name) {\r\n            var messages_bot_type = $(this).find('input.messages_bot_type').val();\r\n            //set active for bot scenario\r\n            $('.scenario-body .bot_scenario, .scenario-body .user_scenario').removeClass('active');\r\n            $(this).addClass('active');\r\n            //get type from bot message and set to sliderbar data\r\n            $('#user_content_type').val(messages_bot_type);\r\n            //set name user message to right slidebar\r\n            messages_focus.val(user_message_name);\r\n            filter_messages_focus.val(filter_message_name);\r\n            //set flag icheck_change_event do not icheck change event handle below action\r\n            icheck_change_event = false;\r\n            checkContentUserMessage(messages_bot_type);\r\n            setUserDataToForm();\r\n            icheck_change_event = true;\r\n        // }\r\n    });\r\n\r\n    ///////////////////////START ACTION USER MESAGE\r\n    //TEXT\r\n    $(document).on('input change', '.message_user_area .text_group textarea', function (event) {\r\n        getDataUserFromInput();\r\n    });\r\n\r\n    ///////////////////////START ACTION BOT MESAGE\r\n    //get type of bot input textarea\r\n    $('.scenario-body').on('click', '.bot_scenario', function (event) {\r\n        message_type_bot = true;\r\n        var messages_focus      = $('input.messages_focus'),\r\n            filter_messages_focus = $('input.filter_messages_focus'),\r\n            btn_next_messages_focus = $('input.btn_next_messages_focus'),\r\n            input_requiment_messages_focus = $('input.input_requiment_messages_focus'),\r\n            bot_message_name    = $(this).find('.messages_bot_content').attr('name'),\r\n            filter_message_name    = $(this).find('.filter_content ').attr('name'),\r\n            btn_next_message_name    = $(this).find('.btn_next_content ').attr('name'),\r\n            input_requiment_name    = $(this).find('.input_requiment_content').attr('name');\r\n\r\n        // if (messages_focus.val() != bot_message_name) {\r\n            $('.message_bot_area  .footer_message_input .carousel_slide').hide();\r\n            //set active for bot scenario\r\n            $('.scenario-body .bot_scenario, .scenario-body .user_scenario').removeClass('active');\r\n            $(this).addClass('active');\r\n\r\n            var messages_bot_type = $(this).find('input.messages_bot_type').val();\r\n\r\n            //get type from bot message and set to sliderbar data\r\n            $('#bot_content_type').val(messages_bot_type);\r\n\r\n            //set name bot message to right slidebar\r\n            messages_focus.val(bot_message_name);\r\n            filter_messages_focus.val(filter_message_name);\r\n            btn_next_messages_focus.val(btn_next_message_name);\r\n            input_requiment_messages_focus.val(input_requiment_name);\r\n\r\n            // checkContentBotMessage(messages_bot_type);\r\n            checkContentBotMessage();\r\n            setBotDataToForm();\r\n            //show label empty if not exist any msg\r\n            checkTotalMessageInBlock();\r\n\r\n            var variable_input = $('.message_container_input .type_group').find('input.btn_is_variable');\r\n            initIcheck(variable_input);\r\n            // checkbox is required\r\n            var is_required_input = $('.message_container_input .type_group').find('input.btn_is_required');\r\n            initIcheck(is_required_input);\r\n            // checkbox is weekend off in calendar group\r\n            var is_weekend_off = $('.message_container_input .calendar_group').find('input.btn_is_weekend_off');\r\n            initIcheck(is_weekend_off);\r\n\r\n        checkUseRequiment();\r\n        setHeightSlidebar();\r\n        // }\r\n    });\r\n\r\n    //Change select content type\r\n    $('.message_bot_area .add_msg_type').on('click', function (event) {\r\n        var bot_message_current         = botMessageElement(),\r\n            bot_message_current_type    = bot_message_current.next('input.messages_bot_type'),\r\n            bot_content_type            = $('.message_bot_area #bot_content_type').val();\r\n\r\n        //check text type and clear content bot message\r\n        var old_type = bot_message_current_type.val();\r\n        if(old_type != bot_content_type) {\r\n            bot_message_current.val('');\r\n        }\r\n        //change type for bot message\r\n        bot_message_current_type.val(bot_content_type);\r\n        //re-set type follow active group message\r\n        botMessageType(bot_content_type);\r\n\r\n        setDataMediaDemo(true);\r\n        checkContentBotInput(bot_content_type);\r\n        checkUseRequiment();\r\n        //show label empty if not exist any msg\r\n        checkTotalMessageInBlock();\r\n    });\r\n    //Change select content type\r\n    $('#user_content_type').on('change', function (event) {\r\n        var user_current        = userMessageElement(),\r\n            user_current_type   = user_current.next('input.messages_bot_type'),\r\n            user_input_text     = userInputText();\r\n        //change type for bot message\r\n        user_current_type.val($(this).val());\r\n        //check text type and clear content user message\r\n        user_current.val('');\r\n        user_input_text.importTags('');\r\n        userMessageType($(this).val());\r\n        setUserDataMediaDemo(true);\r\n        //set flag icheck_change_event do not icheck change event handle below action\r\n        icheck_change_event = false;\r\n        checkContentUserMessage($(this).val());\r\n        getDataUserFromInput();\r\n\r\n        icheck_change_event = true;\r\n        // createTag();\r\n    });\r\n\r\n    //event add user + bot\r\n    $('.add_pattern_user').on('click', function (event) {\r\n        var message_position = getMessagePosition(this);\r\n        cloneUser(message_position);\r\n    });\r\n    //event add bot\r\n    $('.add_pattern_bot').on('click', function (event) {\r\n        var message_position = getMessagePosition(this);\r\n        cloneBot(message_position);\r\n    });\r\n    //event slide carousel\r\n    $('.carousel_slide .left').click(function() {\r\n        $('.generic_group.active .generic_container').carousel('prev');\r\n        checkCarouselSlide();\r\n    });\r\n\r\n    $('.carousel_slide .right').click(function() {\r\n        $('.generic_group.active .generic_container').carousel('next');\r\n        checkCarouselSlide();\r\n    });\r\n    $('.generic_carousel').bind('slid.bs.carousel', function (e) {\r\n        $('.generic_container').carousel('pause');\r\n    });\r\n    //delete group carousel\r\n    $(document).on(\"click\", '.generic_group .group_delete_btn', function (event) {\r\n        $(this).parents('.generic_group').remove();\r\n        $('.message_bot_area .generic_indicators li').remove();\r\n        // $('.message_bot_area .footer_message_input .carousel_slide').hide();\r\n        checkCarouselSlide();\r\n        getDataFromInput();\r\n    });\r\n    //set active for type_group when click\r\n    $(document).on('click', '.message_bot_area .type_group, .message_user_area .type_group', function (event) {\r\n        $('.message_bot_area .type_group, .message_user_area .type_group').removeClass('active');\r\n        $(this).addClass('active');\r\n\r\n        //re-set type follow active group message\r\n        botMessageType($(this).data('type'));\r\n        // show/hide button add item\r\n        check_add_item_common();\r\n        if(message_type_bot){\r\n            setValMessageType($(this).data('type'));\r\n            var type  = common_data['bot_content_type'];\r\n            if ($(this).data('type') == type[type_carousel]) {\r\n                checkCarouselSlide();\r\n            }\r\n        }\r\n    });\r\n\r\n    // add button item common\r\n   /* $('.message_container_input .footer_message_input .add_item_common').on('click', function (event) {\r\n        var bot_message_type    = botMessageType(),\r\n            type                = common_data['bot_content_type'];\r\n\r\n        if(bot_message_type == type[type_radio]) {\r\n            var msg_active = getMessageFormActive(),\r\n                template_radio = common_data['template_radio'];\r\n            if (msg_active.find('.radio_type').val() == template_radio[type_image_radio]) {\r\n                addRadioImage();\r\n            }else {\r\n                addRadioBox();\r\n            }\r\n        } else if(bot_message_type == type[type_checkbox]) {\r\n            addCheckboxBox();\r\n        }else if(bot_message_type == type[type_pulldown]) {\r\n            addItemPulldown();\r\n        }else if(bot_message_type == type[type_terms_of_use]) {\r\n            addItemLink();\r\n        }\r\n    });*/\r\n\r\n    //*** AJAX ON ***\r\n    // ajax update scenario\r\n    $('.updateScenario').on('click', function (event) {\r\n        // validateMessages();\r\n        createPreview();\r\n        updateScenario();\r\n    });\r\n    //MOVE ITEM\r\n    $('.fixedsidebar-content').sortable({\r\n        items: \".type_group\",\r\n        stop: function(event, ui) {\r\n            getDataFromInput();\r\n        }\r\n    });\r\n    // variable change\r\n    $(document).on(\"change\", '.type_group .button_variable', function (event) {\r\n        getDataFromInput();\r\n    });\r\n    //-----------------start set value from right sliderbar to bot message\r\n    //GROUP TYPE MESSAGE\r\n    $(document).on(\"click\", '.type_group .group_delete_btn', function (event) {\r\n        $(this).parents('.type_group').remove();\r\n        checkUseRequiment();\r\n        getDataFromInput();\r\n        //show label empty if not exist any msg\r\n        checkTotalMessageInBlock();\r\n    });\r\n    //change preview captcha\r\n    $(document).on(\"change\", '.captcha_group .captcha_type, .captcha_group .captcha_color', function (event) {\r\n        var parent = $(this).closest('.captcha_group');\r\n        previewCaptcha(parent);\r\n    });\r\n    $(document).on('input change', '.captcha_group .size', function (event) {\r\n        if(event.type == 'input') {\r\n            var parent = $(this).closest('.captcha_group');\r\n            previewCaptcha(parent);\r\n        }\r\n    });\r\n    //CHECKBOX FOR USE VARIABLE\r\n    $(document).on('ifChanged', '.type_group input.btn_is_variable', function (event) {\r\n        if(icheck_change_event) {\r\n            var group = $(this).closest('.type_group'),\r\n                is_variable = group.find('input.btn_is_variable:checked').val(),\r\n                variable    = group.find('div.variable_group'),\r\n                messages_user_variable = group.find('input.messages_user_variable').val();\r\n            if(is_variable != void 0 && is_variable) {\r\n                variable.removeClass('hidden');\r\n            } else {\r\n                variable.addClass('hidden');\r\n            }\r\n            getDataFromInput();\r\n\r\n        }\r\n    });\r\n    //CHECKBOX FOR CARD PAYMENT TYPE\r\n    $(document).on('ifChanged', '.type_group input.btn_is_card_type', function (event) {\r\n        if(icheck_change_event) {\r\n            var group = $(this).closest('.card_type'),\r\n                is_card_type = group.find('input.btn_is_card_type:checked');\r\n            if(is_card_type != void 0 && is_card_type.length){\r\n                getDataFromInput();\r\n            }\r\n        }\r\n    });\r\n    //CHECKBOX INPUT REQUIMENT\r\n    $(document).on('ifChanged', '.checkbox_requirement_one input.btn_is_input_requiment', function (event) {\r\n        if(icheck_change_event) {\r\n            checkActiveRequirementOne();\r\n            getDataFromInput();\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '.type_group .img_card_type', function (event) {\r\n        var card_type_item = $(this).parents('.card_type_item');\r\n        if(card_type_item.length){\r\n            icheckAuto('toggle', card_type_item.find('.btn_is_card_type'));\r\n        }\r\n        getDataFromInput();\r\n    });\r\n\r\n    //CHECKBOX FOR REQUIRED\r\n    $(document).on('ifChanged', '.type_group input.btn_is_required', function (event) {\r\n        if(icheck_change_event) {\r\n            getDataFromInput();\r\n        }\r\n        if ($(this).closest('.type_group').attr('data-type') == common_data['bot_content_type'][type_carousel]) {\r\n            check_add_item_common();\r\n        }\r\n    });\r\n    //CHECKBOX WEEKEND OFF FOR CALENDAR GROUP\r\n    $(document).on('ifChanged', '.calendar_group input.btn_is_weekend_off', function (event) {\r\n        if(icheck_change_event) {\r\n            getDataFromInput();\r\n        }\r\n        // if ($(this).closest('.type_group').attr('data-type') == common_data['bot_content_type'][type_carousel]) {\r\n        //     check_add_item_common();\r\n        // }\r\n    });\r\n    //SELECT VALIDATION IN TYPE INPUT TEXT\r\n    /*$(document).on('ifChanged', '.type_group input.btn_validation', function (event) {\r\n        if(icheck_change_event) {\r\n            getDataFromInput();\r\n        }\r\n    });*/\r\n\r\n    //lABEL IN GROUP MESSAGE\r\n    $(document).on(\"change\", '.type_group .input_label_type', function (event) {\r\n        if($(this).val() ==  no_label) {\r\n            $(this).parents('.type_group').find('.input_label').addClass('hide').val('');\r\n        }else {\r\n            $(this).parents('.type_group').find('.input_label').removeClass('hide');\r\n        }\r\n        getDataFromInput();\r\n    });\r\n    // TEMPLATE TYPE IN TEXTAREA GROUP MESSAGE\r\n    $(document).on(\"change\", '.type_group .textarea_type', function (event) {\r\n        if($(this).val() ==  type_textarea_input) {\r\n            $(this).parents('.type_group').find('.use_variable').removeClass('hide');\r\n            $(this).parents('.type_group').find('.is_required').removeClass('hide');\r\n            $(this).parents('.type_group').find('textarea.input_text_type').removeClass('readonly').addClass('placeholder');\r\n            $(this).parents('.type_group').find('textarea.input_text_type').textcomplete('destroy');\r\n            $(this).parents('.type_group').find('.delete_textarea_box').addClass('hide');\r\n        }else {\r\n            $(this).parents('.type_group').find('.use_variable').addClass('hide');\r\n            $(this).parents('.type_group').find('.is_required').addClass('hide');\r\n            $(this).parents('.type_group').find('textarea.input_text_type').removeClass('placeholder').addClass('readonly');\r\n            $(this).parents('.type_group').find('.delete_textarea_box').removeClass('hide');\r\n            messageTextComplete();\r\n        }\r\n        getDataFromInput();\r\n    });\r\n    // TERM OF USE TYPE IN TERM OF USE GROUP MESSAGE\r\n    $(document).on(\"change\", '.type_group .term_of_use_type', function (event) {\r\n        var template_term_of_use = common_data['template_term_of_use'];\r\n        if($(this).val() ==  template_term_of_use[type_detail_content]) {\r\n            $(this).parents('.type_group').find('.link_input').addClass('hide');\r\n            $(this).parents('.type_group').find('.add_link_input').addClass('hide');\r\n            $(this).parents('.type_group').find('.textarea_input').removeClass('hide');\r\n        }else {\r\n            $(this).parents('.type_group').find('.textarea_input').addClass('hide');\r\n            $(this).parents('.type_group').find('.link_input').removeClass('hide');\r\n            $(this).parents('.type_group').find('.add_link_input').removeClass('hide');\r\n            checkItemLink();\r\n        }\r\n        check_add_item_common();\r\n        getDataFromInput();\r\n    });\r\n    //RADIO, CHECKBOX\r\n    $(document).on('input change', '.message_bot_area .fixedsidebar-content input, .message_bot_area .fixedsidebar-content textarea', function (event) {\r\n        if(event.type == 'input') {\r\n            getDataFromInput();\r\n        }\r\n    });\r\n    $(document).on('change', '.message_bot_area .fixedsidebar-content select', function (event) {\r\n        getDataFromInput();\r\n    });\r\n    $(document).on('input', '.filter_contain input', function (event) {\r\n        if(event.type == 'input') {\r\n            if(message_type_bot) {\r\n                getDataFromInput();\r\n            } else {\r\n                getDataUserFromInput();\r\n            }\r\n        }\r\n    });\r\n    $(document).on('change', '.filter_contain select', function (event) {\r\n        if(message_type_bot) {\r\n            getDataFromInput();\r\n        } else {\r\n            getDataUserFromInput();\r\n        }\r\n    });\r\n    //change text button next\r\n    $(document).on('input change', '.fixedsidebar-content .text_button_next input.content', function (event) {\r\n        if(event.type == 'input') {\r\n            setTimeout(function (e) {\r\n                getDataFromInput();\r\n            }, 100);\r\n        }\r\n    });\r\n    //select file for file type\r\n    $('#scenario-file-list .btn-file-select').on('click', function () {\r\n        var bot_message_type    = botMessageType(),\r\n            type                = common_data['bot_message_type'],\r\n            type_user           = common_data['bot_content_type'],\r\n            file_path_input     = $('#scenario-file-list #scenario_file_selected'),\r\n            file_path           = file_path_input.val();\r\n        //set file url for image input\r\n        if(file_path != '' && file_path != void 0) {\r\n            // $('.file_group .file_url_input').val(file_path);\r\n            // getDataUserFromInput();\r\n            // //clear val file_path_input in popup file list\r\n            // file_path_input.val('');\r\n           if(bot_message_type == type_user[type_carousel]) {\r\n                var genericActive = genericActiveElement();\r\n                genericActive.find('input.image_url').val(file_path);\r\n                getDataFromInput();\r\n           }else if(bot_message_type == type_user[type_radio]) {\r\n               var radio_image_content_active = $('.message_bot_area .radio_group .radio_box .generic_box_content.active');\r\n               radio_image_content_active.find('input.image_url').val(file_path);\r\n               getDataFromInput();\r\n           }else {\r\n               $('.file_group .file_url_input').val(file_path);\r\n               getDataUserFromInput();\r\n           }\r\n            //clear val file_path_input in popup file list\r\n            file_path_input.val('');\r\n        }\r\n    });\r\n    /*add item filter*/\r\n    $(document).on('click', '#btn_filter_add', function(evt) {\r\n        addFilterItem();\r\n        if(message_type_bot) {\r\n            getDataFromInput();\r\n        } else {\r\n            getDataUserFromInput();\r\n        }\r\n    });\r\n    /*delete item filter*/\r\n    $(document).on('click', '.filter_item .filter_btn_delete', function(evt) {\r\n        $(this).parents('.filter_item').remove();\r\n        indexFilterInput();\r\n        var parent = $('.filter_contain .filter_item').first();\r\n        parent.find('.select_option').remove();\r\n        parent.find('.field_filter_option').removeClass('hidden');\r\n\r\n        // set height scroll filter containt\r\n        var filter_group;\r\n        if(message_type_bot) {\r\n            getDataFromInput();\r\n            filter_group = $('.message_bot_area .filter_group');\r\n        } else {\r\n            getDataUserFromInput();\r\n            filter_group = $('.message_user_area .filter_group');\r\n        }\r\n\r\n        if(filter_group.find('.filter_contain .filter_item').length <= 2) {\r\n            $(filter_group).find('.filter_contain').css('height', 'auto');\r\n            $(filter_group).find('.slimScrollDiv').css('height', 'auto');\r\n        }\r\n\r\n        setHeightSlidebar();\r\n    });\r\n    // remove radio item, checkbox item, posstalcode item, pulldown item, terms of use item\r\n    $(document).on(\"click\", '.radio_box .delete_btn_box', function (event) {\r\n        if($('.message_container_input .radio_group.active .radio_box').length > min_radio_item) {\r\n            $(this).parents('.radio_box').remove();\r\n            checkRadioBox();\r\n            getDataFromInput();\r\n        }\r\n    });\r\n    $(document).on(\"click\", '.checkbox_box .delete_btn_box', function (event) {\r\n        if($('.message_container_input .checkbox_group.active .checkbox_box').length > min_checkbox_item) {\r\n            $(this).parents('.checkbox_box').remove();\r\n            checkCheckboxBox();\r\n            getDataFromInput();\r\n        }\r\n    });\r\n    $(document).on(\"click\", '.pulldown_item .item .delete_btn_box', function (event) {\r\n        if($('.message_container_input .pulldown_group.active .pulldown_item .item').length > min_checkbox_item) {\r\n            $(this).parents('.item').remove();\r\n            checkPulldownBox();\r\n            getDataFromInput();\r\n        }\r\n    });\r\n    $(document).on(\"click\", '.link_input .item_link .delete_btn_box', function (event) {\r\n        if($('.message_container_input .terms_of_use_group.active .link_input .item_link').length > min_checkbox_item) {\r\n            $(this).parents('.item_link').remove();\r\n            checkItemLink();\r\n            getDataFromInput();\r\n        }\r\n    });\r\n    $(document).on(\"click\", '.postal_code_box .delete_btn_box', function (event) {\r\n        $(this).parents('.input_item').remove();\r\n        getDataFromInput();\r\n    });\r\n    $(document).on(\"click\", '.terms_of_use_group .delete_btn_box', function (event) {\r\n        $(this).parents('.terms_of_use_group').remove();\r\n        checkUseRequiment();\r\n        getDataFromInput();\r\n    });\r\n    $(document).on(\"click\", '.confirmation_group .delete_btn_box', function (event) {\r\n        $(this).parents('.confirmation_group').remove();\r\n        checkUseRequiment();\r\n        getDataFromInput();\r\n    });\r\n    $(document).on(\"click\", '.upload_file_group .delete_btn_box', function (event) {\r\n        $(this).parents('.upload_file_group').remove();\r\n        getDataFromInput();\r\n    });\r\n    $(document).on(\"click\", '.label_group .delete_btn_box', function (event) {\r\n        $(this).parents('.label_group').remove();\r\n        getDataFromInput();\r\n    });\r\n    $(document).on(\"click\", '.calendar_group .delete_btn_box', function (event) {\r\n        $(this).parents('.calendar_group').remove();\r\n        getDataFromInput();\r\n    });\r\n    // INPUT TYPE\r\n    $(document).on(\"click\", '.input_box .change_input', function (event) {\r\n        inputGroupChangeNumber();\r\n        getDataFromInput();\r\n    });\r\n    //pulldown custom type\r\n    $(document).on(\"click\", '.pulldown_group .change_number_pulldown', function (event) {\r\n        var parent = $(this).closest('.pulldown_group');\r\n        if ($(this).hasClass('one_pulldown')) {\r\n            parent.find('.one_pulldown').addClass('hidden');\r\n            parent.find('.two_pulldown').removeClass('hidden');\r\n        } else {\r\n            parent.find('.one_pulldown').removeClass('hidden');\r\n            parent.find('.two_pulldown').addClass('hidden');\r\n        }\r\n        customPulldownChangeNumber($(this));\r\n        // getDataFromInput();\r\n    });\r\n    //radio image type\r\n    $(document).on(\"click\", '.radio_group .change_number_image', function (event) {\r\n        changeNumberImageRadio($(this));\r\n    });\r\n    //delete user message box\r\n    $(document).on('click', '.user_scenario .delete_user_box', function (event) {\r\n        $(this).parents('.user_scenario').remove();\r\n        //if 2 element class action-group same then remove 1 class action-group\r\n        deleteButtonAction();\r\n        message_area_select(null);\r\n        generateNameMessageBox();\r\n        userInputText('');\r\n    });\r\n\r\n    //delete bot message box\r\n    $(document).on('click','.bot_scenario .delete_bot_box',function(e){\r\n        $(this).parents('.bot_scenario').remove();\r\n        //if 2 element class action-group same then remove 1 class action-group\r\n        deleteButtonAction();\r\n        message_area_select(null);\r\n        generateNameMessageBox();\r\n        $('input.messages_focus').val('');\r\n        $('input.filter_messages_focus').val('');\r\n        $('input.btn_next_messages_focus').val('');\r\n        $('input.input_requiment_messages_focus').val('');\r\n    });\r\n\r\n    //add a message block if not exist any user message and bot message\r\n    if(!$('.scenario_block .user_scenario').length && !$('.scenario_block .bot_scenario').length) {\r\n        $('.add_pattern_user').click();\r\n    }\r\n    // remove generic block\r\n    $(document).on(\"click\", '.generic_box .delete_generic_box', function (event) {\r\n        if($('.generic_container .generic_box').length > 1) {\r\n            $(this).parents('.generic_box').remove();\r\n            //----Carousel process\r\n            //delete generic indicators item of generic_box\r\n            $('.generic_indicators li.active').remove();\r\n            //re-set index for generic indicators\r\n            $('.generic_indicators li').each(function (index, value) {\r\n                $(this).attr('data-slide-to', index);\r\n            });\r\n            //set active for first indicators and first generic_box\r\n            $('.generic_indicators li:first-child').addClass('active');\r\n            $('.generic_container .generic_box:first-child').addClass('active');\r\n            checkCarouselSlide();\r\n            ////////////////////\r\n            checkGenericBox();\r\n            getDataFromInput();\r\n            check_add_item_common();\r\n        }\r\n    });\r\n\r\n    //re-sort position message box\r\n    $('.scenario_block').sortable({\r\n        items: \".message_box\",\r\n        // cancel: \".bot_media_demo, .user_media_demo\",\r\n        activate: function(event, ui) {\r\n\r\n        },\r\n        stop: function(event, ui) {\r\n            //re-generate bot for message library\r\n            generateNameMessageBox();\r\n            //if 2 element class action-group same then remove 1 class action-group\r\n            deleteButtonAction();\r\n            //update name of message box focusing to messages_focus input\r\n            var msg_focusing = getMessageBoxActive(),\r\n                msg_name     = msg_focusing.find('textarea.messages_bot_content').attr('name'),\r\n                filter_name     = msg_focusing.find('textarea.filter_content').attr('name'),\r\n                btn_next_name   = msg_focusing.find('textarea.btn_next_content').attr('name'),\r\n                input_requiment_name   = msg_focusing.find('input.input_requiment_content').attr('name');\r\n            $('input.messages_focus').val(msg_name);\r\n            $('input.filter_messages_focus').val(filter_name);\r\n            $('input.btn_next_messages_focus').val(btn_next_name);\r\n            $('input.input_requiment_messages_focus').val(input_requiment_name);\r\n        }\r\n    });\r\n\r\n    //generate name for input message block\r\n    generateNameMessageBox();\r\n    //carousel slide when select generic message\r\n    /*$('.message_bot_area .generic_carousel').bind('slid.bs.carousel', function (e) {\r\n        checkCarouselSlide();\r\n    });*/\r\n    uploadFile();\r\n    setHeightSlidebar();\r\n\r\n    //disable submit message form\r\n    $(\".scenario-edit form.scenarioForm\").submit(function (e) {\r\n        e.preventDefault();\r\n    });\r\n});\r\n\r\nfunction createPreview() {\r\n    $(\".scenario-edit .scenario_block .messages_bot_content\").each(function(index, element) {\r\n        var value = $(element).val();\r\n        var bot_chat = null;\r\n        if(value != void 0 && value != '' && $(element).parent().hasClass('bot_content_box')){\r\n            var msg_data = JSON.parse(value);\r\n            if(msg_data != void 0 && msg_data.message != void 0 && msg_data.message != ''){\r\n                var msg = msg_data.message;\r\n                bot_chat = $('.template-efo .item').clone();\r\n                bot_chat = createBotPreview(msg, bot_chat);\r\n                $(element).parents('.bot_form_box').find('.bot_media_demo .text_message').html(bot_chat.html());\r\n            } else{\r\n                $(element).parents('.bot_form_box').find('.bot_media_demo .text_message').html('');\r\n            }\r\n        }\r\n    });\r\n    initDatePicker();\r\n    initSlick();\r\n    resetSlickCarousel();\r\n}\r\n\r\nfunction createBotPreview(msg, element) {\r\n    var item = null,\r\n        bot_content_type = common_data['bot_content_type'],\r\n        template_radio = common_data['template_radio'];\r\n    for(var i = 0 ; i < msg.length; i++){\r\n        item = $('.template-efo .item').clone();\r\n        item.addClass('col-xs-12');\r\n        var template_radio = common_data['template_radio'];\r\n        if(msg[i].type != void 0 && (msg[i].type == common_data['bot_content_type']['radio'])){\r\n            if(msg[i].template_type == template_radio[type_image_radio]){\r\n                console.log('type_image_radio');\r\n                item = viewEfoRadioImage(item, msg[i]);\r\n            } else {\r\n                item = viewEfoSelectBox(item, msg[i].type, msg[i]);\r\n            }\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['checkbox']){\r\n            item = viewEfoSelectBox(item, msg[i].type, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['input']){\r\n            item = viewInput(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['textarea']){\r\n            item = viewTextarea(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['postal_code']){\r\n            item = viewPostalCode(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['terms_of_use']){\r\n            item = viewTermsUse(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['pulldown']){\r\n            item = viewPullDown(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['text']){\r\n            item = viewLabel(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['card_payment']){\r\n            item = viewCardPayment(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['carousel']){\r\n            item = viewCarousel(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['file']){\r\n            item = viewFile(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['calendar']){\r\n            item = viewCalendar(item, msg[i]);\r\n        } else if(msg[i].type != void 0 && msg[i].type == bot_content_type['captcha']){\r\n            item = viewCaptcha(item, msg[i]);\r\n        }\r\n        $(element).append(item);\r\n    }\r\n    if(showHiddenButtonNext(msg)){\r\n        var button_action = viewButton(element, false, 'btn-action');\r\n        element.append(button_action);\r\n    }\r\n    return element;\r\n}\r\n\r\n/**\r\n * set data for common variable\r\n */\r\nfunction setDataCommon(key, value) {\r\n    common_data[key] = value;\r\n}\r\n\r\n//add new user box\r\nfunction cloneUser(add_before_element) {\r\n\tvar clone = $('.scenario_block_origin .user_scenario').clone();\r\n\tclone.find('.user_media_content').addClass('clone_user_media');\r\n\tif(add_before_element != void 0 && $(add_before_element).length > 0){\r\n        $(add_before_element).before(clone);\r\n    } else{\r\n        $('.scenario_block').append(clone);\r\n    }\r\n    generateNameMessageBox();\r\n    //focus to new user box\r\n    clone.click();\r\n}\r\n\r\n//add new bot box\r\nfunction cloneBot(add_before_element) {\r\n\tvar clone = $('.scenario_block_origin .bot_scenario').clone();\r\n    if(add_before_element != void 0 && $(add_before_element).length > 0){\r\n        $(add_before_element).before(clone);\r\n    } else{\r\n        $('.scenario_block').append(clone);\r\n    }\r\n    $('.message_bot_area  .footer_message_input .carousel_slide').hide();\r\n    //reset name for mesage input\r\n    generateNameMessageBox();\r\n    //focus to new bot box\r\n    clone.click();\r\n}\r\n\r\n\r\nfunction uploadFile() {\r\n    $(document).on('click', '.upload_image', function () {\r\n        var box_message = $(this).parents('.file_select_box').find('.box_message'),\r\n            allowdtypes = $(this).data('image_type'),\r\n            max_size_image = 40, //Mb\r\n            max_size_video = 40; //Mb\r\n\r\n        allowdtypes = (allowdtypes != void 0 && allowdtypes != '') ? allowdtypes : 'jpeg,jpg,png,gif,mp4,pdf';\r\n        allowdtypes = allowdtypes.split(',');\r\n        // image: jpeg,jpg,png,gif\r\n        // video: mp4\r\n        // file: pdf\r\n\r\n        $(this).fileupload({\r\n            dropZone: $(this),\r\n            add: function (e, data) {\r\n                setMesssage(null);\r\n                var data_file_upload = data.files[0];\r\n                var error_name = '';\r\n                var fileType = data_file_upload.name.split('.').pop().toLowerCase();\r\n                var max_size_file = (fileType == 'mp4') ? max_size_video : max_size_image;\r\n\r\n                if(allowdtypes.indexOf(fileType) < 0) {\r\n                    error_name = $(this).data('error_type');\r\n                    error_name = error_name.replace(':values', allowdtypes.join(', '));\r\n\r\n                } else if (data_file_upload.size > max_size_file*1024*1024) {//Byte\r\n                    error_name = $(this).data('error_size');\r\n                    error_name = error_name.replace(':max', max_size_file*1024); //Kb\r\n                }\r\n\r\n                if(error_name != '') {\r\n                    setMesssage(error_name, 1, box_message, true);\r\n                }else{\r\n                    data.submit();\r\n                }\r\n            },fail:function(e, data){\r\n                var errors = $.parseJSON(data.jqXHR.responseText);\r\n                if(errors.error != void 0 && errors.error != '') {\r\n                    setMesssage(errors.error , 1, box_message, true);\r\n                }\r\n            },success:function (data) {\r\n                if(data != void 0){\r\n                    if(data.success) {\r\n                        if(data.path_file != void 0){\r\n                            $('#scenario-file-list #scenario_file_selected').val(data.path_file);\r\n                            $('#scenario-file-list .btn-file-select').click();\r\n                            setMesssage(data.success_mess, 2,box_message, true);\r\n                        }\r\n                    } else {\r\n                        var message = '';\r\n                        var errors = data.errors;\r\n                        for(var key in errors){\r\n                            message += errors[key]\r\n                        }\r\n                        setMesssage(message, 1, box_message, true);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * generate name for user and bot message input\r\n */\r\nfunction generateNameMessageBox() {\r\n    var position        = 0,\r\n        message_type    = common_data['message_type'];\r\n    //set index (position) for mesage block\r\n    $('.scenario_block').children().each(function (index, element) {\r\n        if($(this).hasClass('user_scenario')) {\r\n            var prefix_user = 'message[' + message_type['bot'] + '][' + position + ']';\r\n            $(this).find('.messages_bot_content').attr('name', prefix_user + '[content]');\r\n            $(this).find('.filter_content').attr('name', prefix_user + '[filter]');\r\n            $(this).find('.messages_bot_type').attr('name', prefix_user + '[type]');\r\n            position++;\r\n        }\r\n        if($(this).hasClass('bot_scenario')) {\r\n            var prefix_bot = 'message[' + message_type['user'] + '][' + position + ']';\r\n            $(this).find('.messages_bot_content').attr('name', prefix_bot + '[content]');\r\n            $(this).find('.filter_content').attr('name', prefix_bot + '[filter]');\r\n            $(this).find('.btn_next_content').attr('name', prefix_bot + '[btn_next]');\r\n            $(this).find('.input_requiment_content').attr('name', prefix_bot + '[input_requiment]');\r\n            $(this).find('.messages_bot_type').attr('name', prefix_bot + '[type]');\r\n            position++;\r\n        }\r\n    });\r\n}\r\n//hide, show by check number radio box\r\nfunction checkRadioBox() {\r\n    var group = $('.message_container_input .radio_group.active');\r\n    if(group.length) {\r\n        var radio_box_count = group.find('.radio_box').length,\r\n            delete_button   = group.find('.radio_box .delete_btn_box');\r\n        var template_radio = common_data['template_radio'];\r\n        if(radio_box_count < min_radio_item) {\r\n            if (group.find('.radio_type').val() == template_radio[type_image_radio]) {\r\n                addRadioImage();\r\n            }else {\r\n                addRadioBox();\r\n            }\r\n        } else {\r\n            //show, hide delete button box\r\n            if(radio_box_count <= min_radio_item) {\r\n                delete_button.hide();\r\n            } else {\r\n                delete_button.show();\r\n            }\r\n            check_add_item_common();\r\n        }\r\n    }\r\n}\r\n\r\n//hide, show by check number checkbox box\r\nfunction checkCheckboxBox() {\r\n    var group = $('.message_container_input .checkbox_group.active');\r\n    if(group.length) {\r\n        var checkbox_box_count = group.find('.checkbox_box').length,\r\n            delete_button      = group.find('.checkbox_box .delete_btn_box');\r\n\r\n        if(checkbox_box_count < min_checkbox_item) {\r\n            addCheckboxBox();\r\n        } else {\r\n            //show, hide delete item box\r\n            if(checkbox_box_count <= min_checkbox_item) {\r\n                delete_button.hide();\r\n            } else {\r\n                delete_button.show();\r\n            }\r\n            check_add_item_common();\r\n        }\r\n    }\r\n}\r\n//hide, show by link number term of use box\r\nfunction checkItemLink() {\r\n    var group = $('.message_container_input .terms_of_use_group.active');\r\n    if(group.length) {\r\n        var link_box_count = group.find('.item_link').length,\r\n            delete_button      = group.find('.item_link .delete_btn_box');\r\n\r\n        if(link_box_count < min_checkbox_item) {\r\n            addItemLink();\r\n        } else {\r\n            //show, hide delete item box\r\n            if(link_box_count <= min_checkbox_item) {\r\n                delete_button.hide();\r\n            } else {\r\n                delete_button.show();\r\n            }\r\n            // check_add_item_common();\r\n        }\r\n    }\r\n}\r\n//hide, show by check number checkbox box\r\nfunction checkPulldownBox() {\r\n    var group = $('.message_container_input .pulldown_group.active');\r\n    if(group.length) {\r\n        var pulldown_box_count = group.find('.pulldown_item .item').length,\r\n            delete_button      = group.find('.pulldown_item .item .delete_btn_box');\r\n\r\n        if(pulldown_box_count < min_checkbox_item) {\r\n            addItemPulldown();\r\n        } else {\r\n            //show, hide delete item box\r\n            if(pulldown_box_count <= min_checkbox_item) {\r\n                delete_button.hide();\r\n            } else {\r\n                delete_button.show();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//show, hide add new button for button type and generic type\r\nfunction check_add_item_common() {\r\n    var add_item_common     = $('.footer_message_input .add_item_common'),\r\n        text_button_next    = $('.message_bot_area .fixedsidebar-content .text_button_next'),\r\n        bot_message_type    = botMessageType(),\r\n        type                = common_data['bot_content_type'],\r\n        item_btn_count      = 0,\r\n        max_num             = 1;\r\n    add_item_common.hide();\r\n    text_button_next.hide();\r\n    if(bot_message_type == type[type_radio]) {\r\n        item_btn_count         = -1;\r\n    } else if(bot_message_type == type[type_checkbox]) {\r\n        item_btn_count         = -1;\r\n    }else if(bot_message_type == type[type_textarea] || bot_message_type == type[type_input] || bot_message_type == type[type_postal_code]\r\n             || bot_message_type == type[type_confirmation] || bot_message_type == type[type_file]\r\n             || bot_message_type == type[type_calendar] || bot_message_type == type[type_text] || bot_message_type == type[type_carousel]\r\n             || bot_message_type == type[type_card_payment] || bot_message_type == type[type_captcha]){\r\n        item_btn_count = 1;\r\n    }else if ( bot_message_type == type[type_pulldown]) {\r\n        item_btn_count = 1;\r\n        var group = $('.message_container_input .pulldown_group.active');\r\n        if(group.length) {\r\n            var template_pulldown   = common_data['template_pulldown'];\r\n            if (group.find('.pulldown_type').val() == template_pulldown[type_customize]) {\r\n                item_btn_count = -1;\r\n            }\r\n        }\r\n    }else if ( bot_message_type == type[type_terms_of_use]) {\r\n        item_btn_count = 1;\r\n        var group = $('.message_container_input .terms_of_use_group.active');\r\n        if(group.length) {\r\n            var template_term_of_use = common_data['template_term_of_use'];\r\n            if (group.find('.term_of_use_type').val() != template_term_of_use[type_detail_content]) {\r\n                item_btn_count = -1;\r\n            }\r\n        }\r\n    }\r\n    if(item_btn_count >= max_num) {\r\n        add_item_common.hide();\r\n    } else {\r\n        add_item_common.show();\r\n    }\r\n    /*show/hide input text button next*/\r\n    var number_group_message = $('.message_bot_area .fixedsidebar-content .type_group ').length;\r\n    if (number_group_message == 0) {\r\n        text_button_next.hide();\r\n    }else if(number_group_message == 1 && bot_message_type == type[type_radio]) {\r\n        text_button_next.hide();\r\n    }else if (number_group_message == 1 && bot_message_type == type[type_carousel]) {\r\n        var is_required =  $('.message_bot_area .fixedsidebar-content .type_group ').find('input.btn_is_required')[0].checked;\r\n        if (is_required) {\r\n            text_button_next.hide();\r\n        }else {\r\n            text_button_next.show();\r\n        }\r\n    }else {\r\n        text_button_next.show();\r\n    }\r\n}\r\n\r\n/**\r\n * set value user message from input text\r\n * @param value\r\n */\r\nfunction changeDataUserMessage(value) {\r\n    var bot_message = userMessageElement();\r\n    bot_message.val(value);\r\n}\r\n\r\n/**\r\n * set value bot message from input text\r\n * @param value\r\n */\r\nfunction changeDataBotMessage(value) {\r\n    var bot_message = botMessageElement();\r\n    bot_message.val(value);\r\n}\r\nfunction changeDataFilter(value) {\r\n    var bot_message = filterElement();\r\n    bot_message.val(value);\r\n}\r\nfunction changeDataBtnNext(value) {\r\n    var bot_message = btnNextElement();\r\n    bot_message.val(value);\r\n}\r\nfunction changeDataRequirementOne(value) {\r\n    var bot_message = inputRequirementElement();\r\n    bot_message.val(value);\r\n}\r\n\r\n/**\r\n * get message active by fucusing\r\n * @returns {*|jQuery|HTMLElement}\r\n */\r\nfunction getMessageBoxActive() {\r\n    return $('.scenario_block .message_box.active');\r\n}\r\n\r\n/**\r\n * get message form active\r\n * @returns {*|jQuery|HTMLElement}\r\n */\r\nfunction getMessageFormActive() {\r\n    return $('.message_container_input .type_group.active');\r\n}\r\n\r\n\r\n/**\r\n * return bot message content focusing\r\n * @returns {*}\r\n */\r\nfunction botMessageContent() {\r\n    var bot_input = botMessageElement();\r\n    return bot_input.val();\r\n}\r\nfunction getFilterContent() {\r\n    var bot_input = filterElement();\r\n    return bot_input.val();\r\n}\r\nfunction getBtnNext() {\r\n    var bot_input = btnNextElement();\r\n    return bot_input.val();\r\n}\r\nfunction getRequirementOne() {\r\n    var bot_input = inputRequirementElement();\r\n    return bot_input.val();\r\n}\r\n\r\n/**\r\n * return bot message type element\r\n * @returns {*}\r\n */\r\nfunction botMessageType(value) {\r\n    var bot_box  = botMessageBoxElement(),\r\n        bot_type = bot_box.find('input.messages_bot_type');\r\n    if(value != void 0) {\r\n        bot_type.val(value);\r\n    }\r\n    return bot_type.val();\r\n}\r\n\r\n/**\r\n * return bot message element\r\n */\r\nfunction botMessageElement() {\r\n    return $(\".bot_scenario textarea[name='\" + $('input.messages_focus').val() + \"']\");\r\n}\r\n\r\n//return filter data\r\nfunction filterElement() {\r\n    if(message_type_bot) {\r\n        return $(\".bot_scenario textarea[name='\" + $('input.filter_messages_focus').val() + \"']\");\r\n    } else {\r\n        return $(\".user_scenario textarea[name='\" + $('input.filter_messages_focus').val() + \"']\");\r\n    }\r\n}\r\n//return btn next data\r\nfunction btnNextElement() {\r\n    if(message_type_bot) {\r\n        return $(\".bot_scenario textarea[name='\" + $('input.btn_next_messages_focus').val() + \"']\");\r\n    } else {\r\n        return $(\".user_scenario textarea[name='\" + $('input.btn_next_messages_focus').val() + \"']\");\r\n    }\r\n}\r\n//return input requiment flg data\r\nfunction inputRequirementElement() {\r\n    if(message_type_bot) {\r\n        return $(\".bot_scenario input[name='\" + $('input.input_requiment_messages_focus').val() + \"']\");\r\n    }\r\n}\r\n\r\n/**\r\n * return bot message box\r\n */\r\nfunction botMessageBoxElement() {\r\n    var bot_input = botMessageElement();\r\n    return bot_input.parents('.bot_form_box');\r\n}\r\n\r\n/**\r\n * change bot text type input\r\n * @returns {*|jQuery|HTMLElement}\r\n */\r\nfunction userInputText(value) {\r\n    var input = $('.message_user_area .text_group .input_text_type');\r\n    if(value != void 0) {\r\n        input.val(value);\r\n    }\r\n    return input;\r\n}\r\n\r\n/**\r\n * return user message content focusing\r\n * @returns {*}\r\n */\r\nfunction userMessageContent() {\r\n    var user_input = userMessageElement();\r\n    return user_input.val();\r\n}\r\n\r\n/**\r\n * return user message type element\r\n * @returns {*}\r\n */\r\nfunction userMessageType(value) {\r\n    var user_message = userMessageBoxElement(),\r\n        user_type    = user_message.find('input.messages_bot_type');\r\n\r\n    if(value != void 0) {\r\n        user_type.val(value);\r\n    }\r\n    return user_type.val();\r\n}\r\n\r\n/**\r\n * return user message element\r\n */\r\nfunction userMessageElement() {\r\n    return $(\".user_scenario textarea[name='\" + $('input.messages_focus').val() + \"']\");\r\n}\r\n\r\n/**\r\n * return user message box\r\n */\r\nfunction userMessageBoxElement() {\r\n    var user_message = userMessageElement();\r\n    return user_message.parents('.user_form_box');\r\n}\r\n\r\n/**\r\n * return variable textarea type\r\n * @returns {*}\r\n */\r\nfunction textareaVariableElement() {\r\n    var msg_active = getMessageFormActive();\r\n    return msg_active.find('input.btn_is_variable');\r\n}\r\nfunction textRequired() {\r\n    var msg_active = getMessageFormActive();\r\n    return msg_active.find('input.btn_is_required');\r\n}\r\nfunction weekendOff() {\r\n    var msg_active = getMessageFormActive();\r\n    return msg_active.find('input.btn_is_weekend_off');\r\n}\r\n\r\n/**\r\n * check or uncheck library item\r\n * @param event\r\n * @param element\r\n * @returns {*|jQuery|HTMLElement}\r\n */\r\nfunction icheckAuto(event, element) {\r\n    if(element != void 0 && element != '') {\r\n        if(event == 'check') {\r\n            element.iCheck('check');\r\n        } else if(event == 'uncheck') {\r\n            element.iCheck('uncheck');\r\n        } else{\r\n            element.iCheck(event);\r\n        }\r\n\r\n    }\r\n}\r\n\r\n/**\r\n * add new radio block\r\n */\r\nfunction addRadioBox() {\r\n    // var clone = $('.scenario_block_origin .radio_box').clone();\r\n    var clone = $('.scenario_block_origin .radio_text').clone();\r\n    $('.message_container_input .radio_group.active .radio_container').append(clone);\r\n    checkRadioBox();\r\n}\r\n/**\r\n * add new radio image\r\n */\r\nfunction addRadioImage() {\r\n    var clone = $('.scenario_block_origin .radio_image').clone();\r\n    $('.message_container_input .radio_group.active .radio_container').append(clone);\r\n    checkRadioBox();\r\n}\r\n/**\r\n * add new checkbox block\r\n */\r\nfunction addCheckboxBox() {\r\n    var clone = $('.scenario_block_origin .checkbox_box').clone();\r\n    $('.message_container_input .checkbox_group.active .checkbox_container').append(clone);\r\n\r\n    checkCheckboxBox();\r\n}\r\n/**\r\n * add new item pulldown\r\n */\r\nfunction addItemPulldown() {\r\n    // var clone = $('.scenario_block_origin .pulldown_box_child .customize_pulldown_item').clone();\r\n    var parent = $('.message_container_input .pulldown_group.active .pulldown_item'),\r\n        clone;\r\n    if (!parent.find('.item').length) {\r\n        clone = $('.scenario_block_origin .pulldown_box_child .customize_one_pulldown_item').clone();\r\n    }else {\r\n        if (parent.find('.item').hasClass('customize_one_pulldown_item')) {\r\n            clone = $('.scenario_block_origin .pulldown_box_child .customize_one_pulldown_item').clone();\r\n        }else {\r\n            clone = $('.scenario_block_origin .pulldown_box_child .customize_two_pulldown_item').clone();\r\n        }\r\n    }\r\n    // $('.message_container_input .pulldown_group.active .pulldown_item').append(clone);\r\n    clone.insertBefore($('.message_bot_area .pulldown_group.active .pulldown_item .add_item_box'));\r\n    checkPulldownBox();\r\n}\r\n\r\nfunction addItemLink() {\r\n    //item_link\r\n    var clone = $('.scenario_block_origin .item_link').clone();\r\n    $('.message_container_input .terms_of_use_group.active .link_input').append(clone);\r\n\r\n    checkItemLink();\r\n}\r\n\r\n/**\r\n * show, hide box message and button preview\r\n */\r\nfunction checkViewMediaDemo() {\r\n    var bot_box  = botMessageBoxElement();\r\n\r\n    //show if is not api or scenario connect type\r\n    var preview = bot_box.find('.preview');\r\n    preview.removeClass('hidden');\r\n}\r\n\r\n/**\r\n * get data from slidebar input for message box by type\r\n * @param type\r\n */\r\nfunction getDataUserFromInput() {\r\n    getDataUserMessage();\r\n    setUserDataMediaDemo();\r\n}\r\n\r\n/**\r\n * get data from slidebar input for message box by type\r\n * @param type\r\n */\r\nfunction getDataFromInput() {\r\n    getDataBotMessage();\r\n    setDataMediaDemo(true);\r\n}\r\n\r\nfunction setActiveLastGroupMsg(is_user) {\r\n    $('.message_bot_area .type_group, .message_user_area .type_group').removeClass('active');\r\n    var bot_message_current         = botMessageElement(),\r\n        bot_message_current_type    = bot_message_current.parents('.message_box').find('input.messages_bot_type'),\r\n        group_last = $('.message_bot_area .type_group').last();\r\n\r\n    if(is_user != void 0 && is_user) {\r\n        group_last = $('.message_user_area .type_group').last();\r\n    }\r\n    if(group_last.length) {\r\n        group_last.addClass('active');\r\n        //set msg type group to type in center view\r\n        bot_message_current_type.val(group_last.data('type'));\r\n        setValMessageType(group_last.data('type'));\r\n    }\r\n}\r\n\r\n/**\r\n * get text data to json and fill to message box\r\n */\r\nfunction getDataUserMessage() {\r\n    var type  = common_data['bot_message_type'];\r\n    var data = {\r\n        'message': []\r\n    };\r\n    // get filter data\r\n    var filter_data = getFilterData(true);\r\n\r\n    //loop radio item\r\n    $('.message_container_input .message_user_area .fixedsidebar-content .type_group').each(function (index, msg_group) {\r\n        var msg_group_type  = $(msg_group).data('type');\r\n        if(msg_group_type != void 0) {\r\n            var msg_group_data = {\r\n                'type': msg_group_type\r\n            };\r\n            switch (msg_group_type) {\r\n                case type[type_text]: {\r\n                    var text_input = userInputText(),\r\n                        content = '';\r\n\r\n                    if (text_input != void 0) {\r\n                        content = text_input.val().trim();\r\n                    }\r\n                    msg_group_data['content'] = content;\r\n                }\r\n                    break;\r\n                case type[type_file]: {\r\n                    var file_url    = $(msg_group).find('.file_url_input').val(),\r\n                        file_url    = $.trim(file_url);\r\n                    var file_type   = checkTypeFile(file_url);\r\n                    if(file_type) {\r\n                        msg_group_data['file_type'] =  file_type;\r\n                        msg_group_data['url'] =  file_url;\r\n                    }\r\n                }\r\n                    break;\r\n                case type[type_mail]: {\r\n                    var mail_val = mailElement();\r\n                    msg_group_data['mail'] =  mail_val.val();\r\n                }\r\n                    break;\r\n                case type[type_scenario_connect]: {\r\n                    var scenario_val = scenarioElement();\r\n                        // data_scenario_connect = {\r\n                        //     'scenario' : scenario_val.val()\r\n                        // };\r\n                    msg_group_data['scenario'] = scenario_val.val();\r\n                }\r\n                    break;\r\n            }\r\n            data['message'].push(msg_group_data);\r\n        }\r\n    });\r\n\r\n    data = JSON.stringify(data);\r\n    changeDataUserMessage(data);\r\n    if (filter_data != undefined && filter_data.length) {\r\n        filter_data = JSON.stringify(filter_data);\r\n    } else {\r\n        filter_data = '';\r\n    }\r\n    changeDataFilter(filter_data);\r\n}\r\n\r\nfunction mailElement(value) {\r\n    var mail_select = $('.message_user_area .mail_group select.mail_select');\r\n    if(value != void 0 && value != '') {\r\n        return mail_select.val(value).trigger('change.select2');\r\n    }\r\n    return mail_select;\r\n}\r\nfunction scenarioElement(value) {\r\n    var scenario_select = $('.message_user_area .scenario_connect_group select.scenario_select');\r\n    if(value != void 0 && value != '') {\r\n        return scenario_select.val(value).trigger('change.select2');\r\n    }\r\n    return scenario_select;\r\n}\r\n/**\r\n * get text data to json and fill to message box\r\n */\r\nfunction getDataBotMessage() {\r\n    var type  = common_data['bot_content_type'];\r\n    var data = {\r\n        'message': []\r\n    };\r\n    // get filter data\r\n    var filter_data = getFilterData(false);\r\n\r\n    //loop radio item\r\n    $('.message_container_input .message_bot_area .fixedsidebar-content .type_group').each(function (index, msg_group) {\r\n        var msg_group_type  = $(msg_group).data('type');\r\n        if(msg_group_type != void 0) {\r\n            var msg_group_data = {\r\n                'type': msg_group_type\r\n            };\r\n            var label_list = [];\r\n\r\n            switch (msg_group_type) {\r\n                case type[type_text]: {\r\n                    // var text_input = userInputText(),\r\n                    //     content = '';\r\n                    //\r\n                    // if (text_input != void 0) {\r\n                    //     content = text_input.val();\r\n                    // }\r\n                    var content = $(msg_group).find('.input_text_type').val().trim();\r\n                    msg_group_data['content'] = (content != '') ? content : '';\r\n\r\n                }\r\n                break;\r\n                case type[type_radio]: {\r\n                    var template_radio = common_data['template_radio'];\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    var template_type = $(msg_group).find('.radio_type').val();\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    if (template_type == template_radio[type_image_radio]) {\r\n\r\n                        if($(msg_group).find('.radio_box') != void 0 && $(msg_group).find('.radio_box').length) {\r\n                            $(msg_group).find('.radio_box').each(function (i, e) {\r\n                                var image_item = [];\r\n                                if ($(e).find('.generic_box_content') != void 0 && $(e).find('.generic_box_content').length) {\r\n                                    $(e).find('.generic_box_content').each(function (ind, item) {\r\n                                        var image_url = $(item).find('input.image_url').val(),\r\n                                            comment = $(item).find('input.title').val();\r\n                                        image_item.push({\r\n                                            'image_url' : image_url,\r\n                                            'comment' : comment\r\n                                        });\r\n                                    });\r\n                                }\r\n                                //push to radio label list\r\n                                label_list.push(image_item);\r\n                            });\r\n                        }\r\n                    } else {\r\n                        //loop radio item\r\n                        if($(msg_group).find('.radio_box') != void 0 && $(msg_group).find('.radio_box').length) {\r\n                            $(msg_group).find('.radio_box').each(function (i, e) {\r\n                                var label     = $(e).find('input.radio_label').val();\r\n                                //push to radio label list\r\n                                label_list.push(label);\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['template_type'] = template_type;\r\n                    msg_group_data['list'] = label_list;\r\n                }\r\n                break;\r\n                case type[type_checkbox]: {\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    //loop checkbox item\r\n                    if($(msg_group).find('.checkbox_box') != void 0 && $(msg_group).find('.checkbox_box').length) {\r\n                        $(msg_group).find('.checkbox_box').each(function (i, e) {\r\n                            var label     = $(e).find('input.checkbox_label').val();\r\n                            //push to checkbox label list\r\n                            label_list.push(label);\r\n                        });\r\n                    }\r\n\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['list'] = label_list;\r\n                }\r\n                break;\r\n                case type[type_textarea]: {\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    var template_type = $(msg_group).find('.textarea_type').val();\r\n                    var content = $(msg_group).find('.input_text_type').val() != undefined ? $(msg_group).find('.input_text_type').val().trim() : '';\r\n\r\n                    msg_group_data['template_type'] = input_type;\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['list'] = label_list;\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['template_type'] = template_type;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['placeholder'] = content;\r\n                }\r\n                break;\r\n                case type[type_input]: {\r\n                    var template_input = common_data['template_input'];\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    var input_type = $(msg_group).find('.input_type').val();\r\n                    if($(msg_group).find('.field_input').length) {\r\n                        $(msg_group).find('.field_input input.content').each(function (i, e) {\r\n                            var placeholder = $(e).val();\r\n                            //push to list\r\n                            label_list.push({\r\n                                'placeholder' : placeholder\r\n                            });\r\n                        });\r\n                    }\r\n                    /*validation type text*/\r\n                    if (input_type == template_input[type_text]) {\r\n                        var validation_type = $(msg_group).find('select.validation_type').val(),\r\n                            min_length = $(msg_group).find('#min_length').val(),\r\n                            max_length = $(msg_group).find('#max_length').val();\r\n                        if(validation_type != void 0 && validation_type != '') {\r\n                            msg_group_data['validation_type'] = validation_type;\r\n                        }\r\n                        if(min_length != void 0 && min_length != '' || max_length != void 0 && max_length != '') {\r\n                            msg_group_data['min_length'] = min_length;\r\n                            msg_group_data['max_length'] = max_length;\r\n                        }\r\n                    }\r\n                    /*tel input type*/\r\n                    if (input_type == template_input[type_tel]) {\r\n                        var tel_input_type = $(msg_group).find('select.tel_input_type_select').val();\r\n                        if(tel_input_type != void 0 && tel_input_type != '') {\r\n                            msg_group_data['tel_input_type'] = tel_input_type;\r\n                        }\r\n                    }\r\n                    /*min max lengh type password*/\r\n                    if (input_type == template_input[type_password] || input_type == template_input[type_password_confirm]) {\r\n                        var min_length = $(msg_group).find('#min_length').val(),\r\n                            max_length = $(msg_group).find('#max_length').val();\r\n                        if(min_length != void 0 && min_length != '' || max_length != void 0 && max_length != '') {\r\n                            msg_group_data['min_length'] = min_length;\r\n                            msg_group_data['max_length'] = max_length;\r\n                        }\r\n                    }\r\n                    msg_group_data['template_type'] = input_type;\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['list'] = label_list;\r\n                }\r\n                    break;\r\n                case type[type_postal_code]: {\r\n                    if($(msg_group).find('.input_item').length) {\r\n                        $(msg_group).find('.input_item').each(function (i, e) {\r\n                            var type = $(e).find('.title').val(),\r\n                            placeholder = $(e).find('input.content').val();\r\n                            //push to list\r\n                            label_list.push({\r\n                                'type' : type,\r\n                                'placeholder' : placeholder\r\n                            });\r\n                        });\r\n                    }\r\n                    msg_group_data['list'] = label_list;\r\n                }\r\n                    break;\r\n                case type[type_pulldown]: {\r\n                    var template_pulldown   = common_data['template_pulldown'];\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    var template_type = $(msg_group).find('.pulldown_type').val();\r\n\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    switch (template_type){\r\n                        case template_pulldown[type_customize]:\r\n                            //comment pulldown\r\n                            var first_title = $(msg_group).find('.customize .pulldown_first_title').val(),\r\n                                last_title = $(msg_group).find('.customize .pulldown_last_title').val();\r\n                            //loop pulldown item\r\n                            if($(msg_group).find('.pulldown_item .item') != void 0 && $(msg_group).find('.pulldown_item .item').length) {\r\n                                if ($(msg_group).find('.pulldown_item .item').hasClass('customize_one_pulldown_item')) {\r\n                                    var pulldown_list = [];\r\n                                    $(msg_group).find('.pulldown_item .item').each(function (i, e) {\r\n                                        var label     = $(e).find('input.pulldown_label').val();\r\n                                        pulldown_list.push(label);\r\n                                        //push to pulldown label list\r\n                                        // label_list.push(label);\r\n                                    });\r\n                                    label_list.push(pulldown_list);\r\n                                }else {\r\n                                    var first_pulldown_list = [],\r\n                                        last_pulldown_list = [];\r\n                                    $(msg_group).find('.pulldown_item .item').each(function (i, e) {\r\n                                        var label_first_pulldown = $(e).find('.first_pulldown input.pulldown_label').val(),\r\n                                            label_last_pulldown  = $(e).find('.last_pulldown input.pulldown_label').val();\r\n                                        first_pulldown_list.push(label_first_pulldown);\r\n                                        last_pulldown_list.push(label_last_pulldown);\r\n                                        //push to pulldown label list\r\n                                        // label_list.push(label);\r\n                                    });\r\n                                    label_list.push(first_pulldown_list);\r\n                                    label_list.push(last_pulldown_list);\r\n                                }\r\n                                /*$(msg_group).find('.pulldown_item .item').each(function (i, e) {\r\n                                    var label     = $(e).find('input.pulldown_label').val();\r\n                                    //push to pulldown label list\r\n                                    label_list.push(label);\r\n                                });*/\r\n                            }\r\n                            msg_group_data['first_title'] = first_title;\r\n                            msg_group_data['last_title'] = last_title;\r\n                            break;\r\n                        case template_pulldown[type_time]:\r\n                            msg_group_data['spacing_minute'] = $(msg_group).find('.spacing_minute').val();\r\n                            break;\r\n                        case template_pulldown[type_date_time]:\r\n                            msg_group_data['spacing_minute'] = $(msg_group).find('.spacing_minute').val();\r\n                            break;\r\n                        case template_pulldown[type_period_of_time]:\r\n                            msg_group_data['start_spacing_minute'] = $(msg_group).find('.start_time .spacing_minute').val();\r\n                            msg_group_data['end_spacing_minute'] = $(msg_group).find('.end_time .spacing_minute').val();\r\n                            break;\r\n                        case template_pulldown[type_provinces_of_japan]:\r\n                            var label_contain = [];\r\n                            $(msg_group).find('.default_pulldown').each(function (i, e) {\r\n                                var label     = $(e).find('input.pulldown_label').val();\r\n                                //push to pulldown label list\r\n                                label_contain.push(label);\r\n                            });\r\n                            label_list.push(label_contain);\r\n                            break;\r\n                        case template_pulldown[type_towns_and_villages_of_japan]:\r\n                            //comment pulldown\r\n                            var first_title = $(msg_group).find('.towns_and_villages .pulldown_first_title').val(),\r\n                                last_title = $(msg_group).find('.towns_and_villages .pulldown_last_title').val();\r\n\r\n                            msg_group_data['first_title'] = first_title;\r\n                            msg_group_data['last_title'] = last_title;\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    msg_group_data['template_type'] = template_type;\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['comment'] = $(msg_group).find('.comment').val();\r\n                    msg_group_data['list'] = label_list;\r\n                }\r\n                    break;\r\n                case type[type_terms_of_use]: {\r\n                    var template_term_of_use = common_data['template_term_of_use'];\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var template_type = $(msg_group).find('.term_of_use_type').val();\r\n                    var title = \"\";\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    if (template_type == template_term_of_use[type_detail_content]) {\r\n                        var content = $(msg_group).find('.input_text_type').val().trim();\r\n                        msg_group_data['content'] = content;\r\n                    } else {\r\n                        if($(msg_group).find('.link_input .item_link') != void 0 && $(msg_group).find('.link_input .item_link').length) {\r\n                            $(msg_group).find('.link_input .item_link').each(function (i, e) {\r\n                                var link = $(e).find('.url').val(),\r\n                                    link_first_title = $(e).find('.link_first_title').val(),\r\n                                    link_last_title = $(e).find('.link_last_title').val(),\r\n                                    link_text = $(e).find('.link_text').val();\r\n                                label_list.push({\r\n                                    'link_first_title' : link_first_title,\r\n                                    'link_text' : link_text,\r\n                                    'link' : link,\r\n                                    'link_last_title' : link_last_title\r\n                                });\r\n                            });\r\n                        }\r\n                        msg_group_data['list'] = label_list;\r\n                        // var link = $(msg_group).find('.link_input .url').val().trim(),\r\n                        //     link_first_title = $(msg_group).find('.link_input .link_first_title').val(),\r\n                        //     link_last_title = $(msg_group).find('.link_input .link_last_title').val(),\r\n                        //     link_text = $(msg_group).find('.link_input .link_text').val();\r\n                        // msg_group_data['link_first_title'] = link_first_title;\r\n                        // msg_group_data['link_text'] = link_text;\r\n                        // msg_group_data['link'] = link;\r\n                        // msg_group_data['link_last_title'] = link_last_title;\r\n                    }\r\n                    var text_confirm = $(msg_group).find('.text_confirm_label').val();\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['template_type'] = template_type;\r\n                    msg_group_data['text_confirm'] = text_confirm;\r\n                    msg_group_data['required_flg'] = 1;\r\n                    messageTextComplete();\r\n                }\r\n                    break;\r\n                case type[type_confirmation]: {\r\n                    msg_group_data['required_flg'] = 1;\r\n                }\r\n                case type[type_file]: {\r\n                    var file_type = $(msg_group).find('.file_type').val();\r\n                    msg_group_data['file_type'] = file_type;\r\n                    msg_group_data['required_flg'] = 1;\r\n                }\r\n                    break;\r\n                case type[type_calendar]: {\r\n                    var template_calendar = common_data['template_calendar'];\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    // is_weekend of flash\r\n                    if ($(msg_group).find('.calendar_type').val() == template_calendar[type_calendar_select] && $(msg_group).find('input.btn_is_weekend_off').length) {\r\n                        var weekend_off_flg = 0,\r\n                            is_weekend_off = $(msg_group).find('input.btn_is_weekend_off')[0].checked;\r\n                        var calendar_weekend_off = $(msg_group).find('.select_calendar input.datetimepicker');\r\n                        if (calendar_weekend_off.data(\"DateTimePicker\")){\r\n                            calendar_weekend_off.data(\"DateTimePicker\").destroy();\r\n                        }\r\n                        if (is_weekend_off) {\r\n                            //disable weekend calendar\r\n                            initCalendarWeekendOff(calendar_weekend_off, $(msg_group).find('.input_start_date').val());\r\n                            weekend_off_flg = 1;\r\n                        }else {\r\n                            initDateTimePickerSelect($(msg_group).find('.input_start_date').val());\r\n                        }\r\n                        msg_group_data['weekend_off_flg'] = weekend_off_flg;\r\n                    }\r\n                    msg_group_data['template_type'] = $(msg_group).find('.calendar_type').val();\r\n                    msg_group_data['start_date'] = $(msg_group).find('.input_start_date').val();\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                }\r\n                    break;\r\n                case type[type_carousel]: {\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    //loop carousel item\r\n                    if($(msg_group).find('.generic_box') != void 0 && $(msg_group).find('.generic_box').length) {\r\n                        $(msg_group).find('.generic_box').each(function (i, e) {\r\n                            var title     = $(this).find('input.title').val(),\r\n                                sub_type  = $(this).find('input.sub_title').val(),\r\n                                item_url  = $(this).find('input.item_url').val(),\r\n                                image_url = $(this).find('input.image_url').val(),\r\n                                button_title = $(this).find('input.button_title').val();\r\n                            var carousel_data = {\r\n                                'title'     : title,\r\n                                'subtitle'  : sub_type,\r\n                                'item_url'  : item_url,\r\n                                'image_url' : image_url,\r\n                                'button' : {\r\n                                    'title' : button_title,\r\n                                    'type' : 'select'\r\n                                }\r\n                            };\r\n                            label_list.push(carousel_data);\r\n                        });\r\n                        msg_group_data['title_flg'] = title_flg;\r\n                        msg_group_data['title'] = title;\r\n                        msg_group_data['list'] = label_list;\r\n                    }\r\n                }\r\n                    break;\r\n                case type[type_card_payment]: {\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    var card_type = [];\r\n\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n                    if($(msg_group).find('.input_item').length) {\r\n                         $(msg_group).find('.input_item').each(function (i, e) {\r\n                             var type = $(e).find('.title').val(),\r\n                             placeholder = $(e).find('input.content').val();\r\n                             //push to list\r\n                             label_list.push({\r\n                                'type' : type,\r\n                                'placeholder' : placeholder\r\n                             });\r\n                         });\r\n                     }\r\n                     if($(msg_group).find('.card_type input.btn_is_card_type').length) {\r\n                         $(msg_group).find('.card_type input.btn_is_card_type').each(function (i, e) {\r\n                             var is_checked = $(e).iCheck('update')[0].checked;\r\n                             if(is_checked) {\r\n                                 card_type.push($(e).val());\r\n                             }\r\n                         });\r\n                     }\r\n                     msg_group_data['list'] = label_list;\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['card_type'] = card_type;\r\n                }\r\n                    break;\r\n                case type[type_captcha]: {\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    var card_type = [];\r\n\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['captcha_type'] = $(msg_group).find('.captcha_type').val();\r\n                    msg_group_data['size'] = $(msg_group).find('.size').val();\r\n                    msg_group_data['color'] = $(msg_group).find('.captcha_color').val();\r\n\r\n                }\r\n                    break;\r\n                case type[type_add_to_cart]: {\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                }\r\n                    break;\r\n                case type[type_request_document]: {\r\n                    var title_flg = $(msg_group).find('.input_label_type').val();\r\n                    var title = \"\";\r\n                    if (title_flg != no_label) {\r\n                        title = $(msg_group).find('.title').val().trim();\r\n                    }\r\n\r\n                    msg_group_data['title_flg'] = title_flg;\r\n                    msg_group_data['title'] = title;\r\n                    msg_group_data['template_type'] = $(msg_group).find('.document_type').val();\r\n                }\r\n                    break;\r\n            }\r\n\r\n            // set variable value\r\n            // if (is_call_icheck) {\r\n            if ($(msg_group).find('input.btn_is_variable').length) {\r\n                var variable_id = '',\r\n                    is_checked = $(msg_group).find('input.btn_is_variable')[0].checked;\r\n                if (is_checked) {\r\n                    variable_id = $(msg_group).find('select.button_variable').val();\r\n                }\r\n                if (msg_group_type != type[type_terms_of_use]) {\r\n                    msg_group_data['variable_id'] = variable_id;\r\n                }\r\n            }\r\n            var is_input_required = $('.message_bot_area .fixedsidebar-content .checkbox_requirement_one').find('input.btn_is_input_requiment')[0].checked;\r\n            if (!is_input_required &&\r\n                   msg_group_type == type[type_input]\r\n                || msg_group_type == type[type_textarea]\r\n                || msg_group_type == type[type_postal_code]\r\n                || msg_group_type == type[type_postal_code]\r\n                || msg_group_type == type[type_radio]\r\n                || msg_group_type == type[type_checkbox]\r\n                || msg_group_type == type[type_pulldown]\r\n                || msg_group_type == type[type_calendar]\r\n                || msg_group_type == type[type_card_payment]\r\n                || msg_group_type == type[type_carousel]\r\n            ) {\r\n                // is_required flash\r\n                if ($(msg_group).find('input.btn_is_required').length) {\r\n                    var required_flg = 0,\r\n                        is_required = $(msg_group).find('input.btn_is_required')[0].checked;\r\n                    if (is_required) {\r\n                        required_flg = 1;\r\n                    }\r\n                    msg_group_data['required_flg'] = required_flg;\r\n                }\r\n            }\r\n            data['message'].push(msg_group_data);\r\n        }\r\n    });\r\n    //text button next\r\n    var group = $('.message_container_input .message_bot_area .fixedsidebar-content .type_group'),\r\n        number_group = $('.message_container_input .message_bot_area .fixedsidebar-content .type_group').length;\r\n    if ( (number_group == 1 && group.data('type') != type[type_radio])\r\n        ||(number_group == 1 && group.data('type') == type[type_carousel] && !$(group).find('input.btn_is_required')[0].checked) || number_group > 1) {\r\n        var btn_next_data = $('.message_container_input .message_bot_area .fixedsidebar-content .text_button_next input.content').val();\r\n        var bot_lang = common_data['bot_lang'];\r\n       /* if (btn_next_data != '' && list_text_button_next.indexOf(btn_next_data) != -1) {\r\n            btn_next_data = '';\r\n        }*/\r\n        if (btn_next_data != '' && (bot_lang == bot_lang_ja && btn_next_data == text_button_ja || bot_lang != bot_lang_ja && btn_next_data == text_button)) {\r\n            btn_next_data = '';\r\n        }\r\n        changeDataBtnNext(btn_next_data);\r\n    }\r\n    // data input message requiment\r\n    if (number_group > 1) {\r\n        var is_input_required = $('.message_bot_area .fixedsidebar-content .checkbox_requirement_one input.btn_is_input_requiment')[0].checked;\r\n        var input_requiment_flg = 0;\r\n        if (is_input_required) {\r\n            input_requiment_flg = 1;\r\n        }\r\n        changeDataRequirementOne(input_requiment_flg);\r\n    }\r\n\r\n    data = JSON.stringify(data);\r\n    changeDataBotMessage(data);\r\n    if (filter_data != undefined && filter_data.length) {\r\n        filter_data = JSON.stringify(filter_data);\r\n    } else {\r\n        filter_data = '';\r\n    }\r\n    changeDataFilter(filter_data);\r\n}\r\n\r\n/**\r\n * get title from message_container_input for input User demo\r\n * @param is_clear\r\n */\r\nfunction setUserDataMediaDemo(is_clean) {\r\n    var user_message_box = userMessageBoxElement();\r\n    if(is_clean != void 0 && is_clean) {\r\n        user_message_box.find('.user_media_content').val('');\r\n    } else {\r\n        var user_message_type = userMessageType(),\r\n            type = common_data['bot_content_type'],\r\n            value;\r\n\r\n        if(user_message_type == type[type_text]) {\r\n            var typeInput = userInputText();\r\n            value = typeInput.val();\r\n        }\r\n        user_message_box.find('.user_media_content').val(value);\r\n    }\r\n}\r\n\r\n/**\r\n * get title from message_container_input for input Bot demo\r\n * @param is_clear\r\n */\r\nfunction setDataMediaDemo(is_clean) {\r\n    var bot_message_box = botMessageBoxElement();\r\n    if(is_clean != void 0 && is_clean) {\r\n        bot_message_box.find('.bot_media_content').val('');\r\n    } else {\r\n        var bot_message_type    = botMessageType(),\r\n            type                = common_data['bot_content_type'],\r\n            value;\r\n\r\n        if(bot_message_type == type[type_input]) {\r\n            var typeInput = userInputText();\r\n            value = typeInput.val();\r\n\r\n        } else if(bot_message_type == type[type_textarea]) {\r\n            value = $('.button_group .button_container input.button_title').val();\r\n        } else if(bot_message_type == type[type_file]) {\r\n            value = $('.file_group .file_url_input').val();\r\n        } else if(bot_message_type == type[type_calendar]) {\r\n            value = $('.file_group .file_url_input').val();\r\n        }\r\n        bot_message_box.find('.bot_media_content').val(value);\r\n    }\r\n}\r\n\r\n/**\r\n * Actions when click to user message\r\n */\r\nfunction checkContentUserMessage(type_current) {\r\n    $('.message_user_area .fixedsidebar-content .type_group').remove();\r\n    var type = common_data['bot_message_type'],\r\n        user_message = userMessageBoxElement(),\r\n        user_media_demo = $('.scenario_block .user_scenario .user_media_demo'),\r\n        group_message = '';\r\n    //clear data generic\r\n    $('.generic_group .generic_container .generic_box').remove();\r\n    $('.generic_indicators li').remove();\r\n    $('.message_user_area .fixedsidebar-content').html('');\r\n    initFilterGroup();\r\n    switch (type_current){\r\n        case type[type_text]:\r\n            var clone = $('.scenario_message_origin .type_group.text_group').clone();\r\n            $('.message_user_area .fixedsidebar-content').append(clone);\r\n            userInputText('');\r\n            group_message = $('.message_user_area .text_group');\r\n            group_message.find('.input_text_type').focus();\r\n            messageTextComplete();\r\n            changeLabelUserMediaDemo('');\r\n            break;\r\n        case type[type_file]:\r\n            var clone = $('.scenario_message_origin .type_group.file_group').clone();\r\n            $('.message_user_area .fixedsidebar-content').append(clone);\r\n            clone.find('.file_url_input').val('');\r\n            changeLabelUserMediaDemo(type_file);\r\n            break;\r\n        case type[type_mail]:\r\n            var clone = $('.scenario_message_origin .type_group.mail_group').clone();\r\n            $('.message_user_area .fixedsidebar-content').append(clone);\r\n            initSelect2();\r\n            changeMailSelect();\r\n            changeLabelUserMediaDemo(type_mail);\r\n            break;\r\n        case type[type_scenario_connect]:\r\n            var clone = $('.scenario_message_origin .type_group.scenario_connect_group').clone();\r\n            $('.message_user_area .fixedsidebar-content').append(clone);\r\n            initSelect2();\r\n            changeMailSelect();\r\n            changeLabelUserMediaDemo(type_scenario_connect);\r\n            break;\r\n    }\r\n}\r\n//mail and scenario connect change\r\nfunction changeMailSelect() {\r\n    $('.message_user_area .mail_group select.mail_select, .message_user_area .scenario_connect_group select.scenario_select').on('change', function(event){\r\n        getDataUserFromInput();\r\n    });\r\n}\r\n/**\r\n * Actions when select type bot\r\n */\r\nfunction checkContentBotInput(type_current) {\r\n    var type = common_data['bot_content_type'];\r\n    message_area_select(true);\r\n\r\n    //un-active msg type\r\n    $('.message_bot_area .type_group').removeClass('active');\r\n\r\n    //clear validation class in select2 select\r\n    $('.message_bot_area .select2 .select2-selection').removeClass('validation-failed');\r\n\r\n    var bot_message_input   = botMessageBoxElement();\r\n    //hide validate old message box\r\n    setStyleElm(bot_message_input.find('.bot_media_content'), {'border' : ''});\r\n\r\n    //add button demo in bot message\r\n    // checkViewMediaDemo();\r\n    switch (type_current) {\r\n        case type[type_text]:\r\n            initLabelType();\r\n            // changeLabelMediaDemo(type_input);\r\n            break;\r\n        case type[type_input]:\r\n            initInputType();\r\n            // changeLabelMediaDemo(type_input);\r\n            break;\r\n        case type[type_textarea]:\r\n            initTextareaType();\r\n            // changeLabelMediaDemo(type_textarea);\r\n            break;\r\n        case type[type_radio]:\r\n            initRadioType();\r\n            // changeLabelMediaDemo(type_radio);\r\n            break;\r\n        case type[type_checkbox]:\r\n            initCheckboxType();\r\n            // changeLabelMediaDemo(type_checkbox);\r\n            break;\r\n        case type[type_pulldown]:\r\n            initPulldownType();\r\n            // changeLabelMediaDemo(type_pulldown);\r\n            break;\r\n        case type[type_postal_code]:\r\n            initPostalcodeType();\r\n            break;\r\n        case type[type_file]:\r\n            initUploadFileType();\r\n            break;\r\n        case type[type_calendar]:\r\n            initCalendarType();\r\n            break;\r\n        case type[type_terms_of_use]:\r\n            is_call_icheck = false;\r\n            initTermsOfUseType();\r\n            break;\r\n        case type[type_confirmation]:\r\n            is_call_icheck = false;\r\n            initConfirmationType();\r\n            break;\r\n        case type[type_carousel]:\r\n            initCarouselType();\r\n            break;\r\n        case type[type_card_payment]:\r\n            initCardPaymentType();\r\n            break;\r\n        case type[type_captcha]:\r\n            initCaptchaType();\r\n            break;\r\n        case type[type_add_to_cart]:\r\n            initAddToCartType();\r\n            break;\r\n        case type[type_request_document]:\r\n            initDocumentType();\r\n            break;\r\n    }\r\n\r\n    checkActiveRequirementOne();\r\n    getDataFromInput();\r\n    check_add_item_common();\r\n    initSelect2();\r\n    btnAddItem();\r\n    var variable_input = textareaVariableElement();\r\n    initIcheck(variable_input);\r\n    // checkbox is required\r\n    var is_required_input = textRequired();\r\n    initIcheck(is_required_input);\r\n}\r\n\r\n/**\r\n * Actions when click to bot message\r\n */\r\nfunction checkContentBotMessage() {\r\n    $('.message_bot_area .fixedsidebar-content').html('');\r\n    initFilterGroup();\r\n    message_area_select(true);\r\n}\r\n// init select2\r\nfunction initSelect2() {\r\n    $('.fixedsidebar-content select').select2({\r\n        minimumResultsForSearch: -1\r\n    });\r\n}\r\n//init input when select that\r\nfunction initInputType() {\r\n    var group = $('.scenario_block_origin .input_box').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n    inputGroupChangeNumber();\r\n    changeTypeInput();\r\n}\r\n//init textarea when select that\r\nfunction initTextareaType() {\r\n    var group = $('.scenario_block_origin .textarea_box').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n}\r\n//init radio when select that\r\nfunction initRadioType() {\r\n    var group = $('.scenario_block_origin .radio_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n    addRadioBox();\r\n    changeTypeRadio();\r\n}\r\n\r\n//init checkbox when select that\r\nfunction initCheckboxType() {\r\n    var group = $('.scenario_block_origin .checkbox_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n    addCheckboxBox();\r\n}\r\n//init pulldown when select that\r\nfunction initPulldownType() {\r\n    var group = $('.scenario_block_origin .pulldown_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n    initPulldownFirst();\r\n    changeTypePulldown();\r\n}\r\n//init postalcode when select that\r\nfunction initPostalcodeType() {\r\n    var group = $('.scenario_block_origin .postal_code_box').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n}\r\n//init terms of use when select that\r\nfunction initTermsOfUseType() {\r\n    var group = $('.scenario_block_origin .terms_of_use_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n}\r\n//init label when select that\r\nfunction initLabelType() {\r\n    var group = $('.scenario_block_origin .label_group').clone();\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n}\r\n//init confirmation when select that\r\nfunction initConfirmationType() {\r\n    var group = $('.scenario_block_origin .confirmation_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n}\r\n//init upload file when select that\r\nfunction initUploadFileType() {\r\n    var group = $('.scenario_block_origin .upload_file_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n}\r\n//init calendar when select that\r\nfunction initCalendarType(input_start_date) {\r\n    var group = $('.scenario_block_origin .calendar_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n    // init datetimepicker\r\n    changeCalendarType();\r\n    initDateTimePickerSelect(input_start_date);\r\n    var is_weekend_off = weekendOff();\r\n    initIcheck(is_weekend_off);\r\n\r\n    return group;\r\n}\r\n//init carousel when select that\r\nfunction initCarouselType() {\r\n    var group = $('.scenario_block_origin .generic_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n    generic_element_select();\r\n    createCarouselBox(group);\r\n    addItemCarouselBox();\r\n    initslide();\r\n    slideCarousel();\r\n}\r\n//init carousel when select that\r\nfunction initCardPaymentType() {\r\n    var group = $('.scenario_block_origin .card_payment_group').clone();\r\n    initIcheck(group.find('.card_type input'));\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n}\r\n//init captcha when select that\r\nfunction initCaptchaType() {\r\n    var group = $('.scenario_block_origin .captcha_group').clone();\r\n    previewCaptcha(group);\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    // $('.message_bot_area .fixedsidebar-content').append(group);\r\n}\r\n//init add to cart when select that\r\nfunction initAddToCartType() {\r\n    var group = $('.scenario_block_origin .add_to_cart_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n\r\n    return group;\r\n}\r\n//init request document when select that\r\nfunction initDocumentType() {\r\n    var group = $('.scenario_block_origin .request_document_group').clone();\r\n    group.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n    changeTypeDocument();\r\n    return group;\r\n}\r\n/**\r\n * add new generic block\r\n */\r\nfunction createCarouselBox(group) {\r\n    if($('.message_bot_area  .generic_group .generic_container .generic_box').length < max_generic_item) {\r\n        var clone = $('.scenario_block_origin .generic_box').clone();\r\n        group.find('.generic_container').append(clone);\r\n        checkGenericBox();\r\n\r\n        //------Carousel process\r\n        //param false: set active for tem\r\n        addCarouselIndicator('generic_indicators', false);\r\n        checkCarouselSlide();\r\n\r\n        // slideCarousel();\r\n    }\r\n}\r\n// add generic item\r\nfunction addItemCarouselBox() {\r\n    $('.message_bot_area .add_group_box .add_item_generic').on('click', function (event) {\r\n        createCarouselBox($(this).closest('.generic_group'));\r\n    });\r\n}\r\n// slide carousel\r\nfunction slideCarousel() {\r\n    console.log('change slide');\r\n    // $('.carousel_slide .left').click(function() {\r\n    //     $('.generic_container').carousel('prev');\r\n    //     checkCarouselSlide();\r\n    //  });\r\n    //\r\n    //  $('.carousel_slide .right').click(function() {\r\n    //     $('.generic_container').carousel('next');\r\n    //     checkCarouselSlide();\r\n    //  });\r\n}\r\nfunction initslide() {\r\n    $('.message_bot_area .generic_carousel').carousel({\r\n        interval: false,\r\n        wrap: false\r\n        // $indicators: $('.message_bot_area .footer_message_input .carousel-indicators')\r\n    });\r\n}\r\n\r\n/**\r\n * action for elements when select generic in bot message\r\n */\r\nfunction generic_element_select() {\r\n    $('.message_bot_area  .footer_message_input .carousel_slide').show();\r\n    $('.message_bot_area  .footer_message_input .carousel_indicator_item').hide();\r\n}\r\n//hide, show by check number button box\r\nfunction checkGenericBox() {\r\n    var generic_box_count   = $('.message_bot_area .generic_container .generic_box').length,\r\n        delete_button       = $('.message_bot_area .generic_box .delete_generic_box');\r\n\r\n    //show, hide delete generic box\r\n    if(generic_box_count <= 1) {\r\n        delete_button.hide();\r\n    } else {\r\n        delete_button.show();\r\n    }\r\n    checkAddGroupButtonBox();\r\n}\r\n//add Carousel indicators follow generic item\r\nfunction addCarouselIndicator(parent_class, first_active) {\r\n    $('.' + parent_class).append('<li data-slide-to=\"0\" data-target=\"#c-slide\"></li>');\r\n\r\n    //re-set index for generic indicators\r\n    $('.message_bot_area .generic_indicators li').each(function (index, value) {\r\n        $(this).attr('data-slide-to', index);\r\n    });\r\n    //set active for first indicators and first generic_box\r\n    var indicator = $('.message_bot_area .generic_indicators'),\r\n        container = $('.message_bot_area .generic_container');\r\n    indicator.find('li').removeClass('active');\r\n    container.find('.generic_box').removeClass('active');\r\n    if(first_active) {\r\n        indicator.find('li:first-child').addClass('active');\r\n        container.find('.generic_box:first-child').addClass('active');\r\n    } else {\r\n        indicator.find('li:last-child').addClass('active');\r\n        container.find('.generic_box:last-child').addClass('active');\r\n    }\r\n}\r\n//check active slide to hide, show arrow\r\nfunction checkCarouselSlide() {\r\n    var arrow_left  = $(\".message_bot_area .footer_message_input .carousel_slide [data-slide='prev']\"),\r\n        arrow_right = $(\".message_bot_area .footer_message_input .carousel_slide [data-slide='next']\");\r\n\r\n    if ($('.message_bot_area .generic_group.active .generic_container .generic_box').length > 1) {\r\n        if($('.message_bot_area .generic_group.active .generic_container .generic_box:last-child').hasClass('active')) {\r\n            arrow_right.hide();\r\n            arrow_left.show();\r\n        } else if($('.message_bot_area .generic_group.active .generic_container .generic_box:first-child').hasClass('active')) {\r\n            arrow_right.show();\r\n            arrow_left.hide();\r\n        } else {\r\n            arrow_right.show();\r\n            arrow_left.show();\r\n        }\r\n    } else {\r\n        arrow_right.hide();\r\n        arrow_left.hide();\r\n    }\r\n    //re-active Carousel indicator (Because move indicator to outsite Carousel div)\r\n    var indexActive = $('.message_bot_area .generic_container .generic_box.active').index();\r\n    $('.message_bot_area .footer_message_input .generic_indicators li').removeClass('active');\r\n    $('.message_bot_area .footer_message_input .generic_indicators li').eq(indexActive).addClass('active');\r\n}\r\n//hide, show add_group_box button\r\nfunction checkAddGroupButtonBox() {\r\n    var add_group_btn       = $('.message_bot_area  .add_group_box'),\r\n        bot_message_type    = botMessageType(),\r\n        type                = common_data['bot_content_type'],\r\n        item_btn_count,\r\n        max_num;\r\n\r\n    if(bot_message_type == type[type_carousel]) {\r\n        item_btn_count      = $('.message_bot_area .generic_group .generic_container .generic_box').length;\r\n        max_num             = max_generic_item;\r\n    }\r\n    if(item_btn_count >= max_num) {\r\n        add_group_btn.hide();\r\n    } else {\r\n        add_group_btn.show();\r\n    }\r\n}\r\nfunction genericActiveElement() {\r\n    return $('.message_bot_area .generic_group .generic_box.active');\r\n}\r\n/**.\r\n * select bot message or user message\r\n * @param bot: undefined  or null: hide all\r\n */\r\nfunction message_area_select(bot) {\r\n    //hide message user area\r\n    var message_user_area = $('.message_container_input .message_user_area'),\r\n        message_bot_area  = $('.message_container_input .message_bot_area');\r\n    message_user_area.hide();\r\n    message_bot_area.hide();\r\n\r\n    if(bot != null) {\r\n        if(bot) {\r\n            message_bot_area.show();\r\n        } else {\r\n            message_user_area.show();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * set data user mesage come back to input form\r\n */\r\nfunction setUserDataToForm() {\r\n    var user_message_val  = userMessageContent(),\r\n        user_message_type = userMessageType(),\r\n        user_input_text   = userInputText(),\r\n        type              = common_data['bot_message_type'],\r\n        bot_filter_val    = getFilterContent(),\r\n        group_message     = '';\r\n    /*fill data from user message to text input in right slidebar*/\r\n    var jsonData = jsonConverse(user_message_val);\r\n    var filter_data = jsonConverse(bot_filter_val);\r\n\r\n    //show save button\r\n    $('.message_container_input .update_scenario').removeClass('hidden');\r\n\r\n    //clear old filter and fill new value\r\n    setFilterData(filter_data);\r\n\r\n    if(jsonData['message'] != void 0) {\r\n        $(jsonData['message']).each(function (i, msg) {\r\n            var msg_type = msg.type;\r\n            if(msg_type != void 0) {\r\n                switch (msg_type) {\r\n                    case type[type_text]:\r\n                        group_message = $('.message_user_area .text_group');\r\n\r\n                        if(msg.content != void 0) {\r\n                            user_input_text.val(msg.content);\r\n                        }\r\n                        break;\r\n                    case type[type_file]:\r\n                        var url     = msg.url ? msg.url : '';\r\n                        //set file url for file input\r\n                        $('.file_group .file_url_input').val(url);\r\n                        break;\r\n                    case type[type_mail]:\r\n                        var mail_id = msg.mail;\r\n                        //set mail id for selectbox\r\n                        mailElement(mail_id);\r\n                        getDataUserFromInput();\r\n                        break;\r\n                    case type[type_scenario_connect]:\r\n                        // jsonData = msg['data']['message'];\r\n                        // var scenario_id = jsonData['scenario'];\r\n                        var scenario_id = msg.scenario;\r\n                        //set scenario id for selectbox\r\n                        scenarioElement(scenario_id);\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    setActiveLastGroupMsg(true);\r\n}\r\n\r\n/**\r\n * set data bot message come back to input form\r\n */\r\nfunction setBotDataToForm() {\r\n    var bot_message_input   = botMessageElement(),\r\n        bot_message_val     = botMessageContent(),\r\n        bot_filter_val      = getFilterContent(),\r\n        bot_btn_next_val    = getBtnNext(),\r\n        input_requiment_flg_val = getRequirementOne(),\r\n        type                = common_data['bot_content_type'],\r\n        group_message     = '';\r\n\r\n    //fill data from bot message to text input in right slidebar\r\n    var jsonData = jsonConverse(bot_message_val);\r\n    var filter_data = jsonConverse(bot_filter_val);\r\n    //set text btn next\r\n    if (bot_btn_next_val != '') {\r\n        $('.message_container_input .message_bot_area .fixedsidebar-content .text_button_next input.content').val(bot_btn_next_val);\r\n    }\r\n    //clear old input before add\r\n    $('.message_bot_area .fixedsidebar-content .type_group').remove();\r\n\r\n    //clear old filter and fill new value\r\n    setFilterData(filter_data);\r\n\r\n    //remove all generic before action\r\n    $('.message_bot_area .generic_group .generic_container .generic_box').remove();\r\n    $('.message_bot_area .generic_indicators li').remove();\r\n\r\n    if(jsonData['message'] != void 0) {\r\n        $(jsonData['message']).each(function (index, msg) {\r\n            //un-active msg type\r\n            $('.message_bot_area .type_group').removeClass('active');\r\n\r\n            var msg_type = msg.type;\r\n            if(msg_type != void 0) {\r\n                switch (msg_type) {\r\n                    case type[type_radio]: {\r\n                        var template_radio = common_data['template_radio'];\r\n                        group_message = $('.scenario_block_origin .radio_group').clone();\r\n                        if(msg.template_type != void 0 && msg.template_type != '') {\r\n                            group_message.find('.radio_type').val(msg.template_type).trigger('change.select2');\r\n                        }\r\n                        if(msg.list != void 0 && msg.list.length) {\r\n                            var clone;\r\n                            $(msg.list).each(function (i, label) {\r\n                                if (msg.template_type == template_radio[type_image_radio]) {\r\n                                    if (label.length == 1) {\r\n                                        clone = $('.scenario_block_origin .radio_image').clone();\r\n                                        clone.find('input.image_url').val(label[0].image_url);\r\n                                        clone.find('input.title ').val(label[0].comment);\r\n                                    }else if (label.length == 2) {\r\n                                        clone = $('.scenario_block_origin .radio_two_image').clone();\r\n                                        clone.find('.generic_box_content').each(function (index, item) {\r\n                                            console.log(label[index].comment);\r\n                                            $(item).find('input.image_url').val(label[index].image_url);\r\n                                            $(item).find('input.title ').val(label[index].comment);\r\n                                        });\r\n                                    }else if (label.length == 3) {\r\n                                        clone = $('.scenario_block_origin .radio_three_image').clone();\r\n                                        clone.find('.generic_box_content').each(function (index, item) {\r\n                                            $(item).find('input.image_url').val(label[index].image_url);\r\n                                            $(item).find('input.title ').val(label[index].comment);\r\n                                        });\r\n                                    }\r\n\r\n                                }else {\r\n                                    clone = $('.scenario_block_origin .radio_text').clone();\r\n                                    clone.find('input.radio_label').val(label);\r\n                                }\r\n                                group_message.find('.radio_container').append(clone);\r\n                            });\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        //create radio if not exist and show, hide delete radio item label\r\n                        checkRadioBox();\r\n                        changeTypeRadio();\r\n                        btnAddItem();\r\n                    }\r\n                        break;\r\n                    case type[type_checkbox]: {\r\n                        group_message = $('.scenario_block_origin .checkbox_group').clone();\r\n                        if(msg.list != void 0 && msg.list.length) {\r\n                            $(msg.list).each(function (i, label) {\r\n                                var clone = $('.scenario_block_origin .checkbox_box').clone();\r\n                                clone.find('input.checkbox_label').val(label);\r\n                                group_message.find('.checkbox_container').append(clone);\r\n                            });\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        //create checkbox if not exist and show, hide delete radio item label\r\n                        checkCheckboxBox();\r\n                        btnAddItem();\r\n                    }\r\n                        break;\r\n                    case type[type_textarea]: {\r\n                        group_message = $('.scenario_block_origin .textarea_box').clone();\r\n                        if(msg.template_type != void 0 && msg.template_type != '') {\r\n                            if (msg.template_type != type_textarea_input){\r\n                                group_message.find('.input_text_type').removeClass('placeholder').addClass('readonly');\r\n                            }\r\n                            group_message.find('.textarea_type').val(msg.template_type).trigger('change.select2');\r\n                        }\r\n                        if(msg.placeholder != void 0 && msg.placeholder != '') {\r\n                            group_message.find('.input_text_type').val(msg.placeholder);\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        messageTextComplete();\r\n                    }\r\n                        break;\r\n                    case type[type_input]: {\r\n                        group_message = $('.scenario_block_origin .input_box').clone();\r\n                        var template_input = common_data['template_input'];\r\n                        if(msg.template_type != void 0 && msg.template_type != '') {\r\n                            group_message.find('.input_type ').val(msg.template_type).trigger('change.select2');\r\n                        }\r\n\r\n                        /*show type validation input text*/\r\n                        if (group_message.find('.input_type').val() == template_input[type_text]) {\r\n                            group_message.find('.validation_text').removeClass('hidden');\r\n                            group_message.find('.lengh_password').removeClass('hidden');\r\n                            if(msg.min_length != '' || msg.max_length != '') {\r\n                                group_message.find('#min_length').val(msg.min_length);\r\n                                group_message.find('#max_length').val(msg.max_length);\r\n                                passwordLength();\r\n                            }\r\n                        }else {\r\n                            group_message.find('.validation_text').addClass('hidden');\r\n                            group_message.find('.lengh_password').addClass('hidden');\r\n                        }\r\n                        if(msg.validation_type != void 0 && msg.validation_type != '') {\r\n                            group_message.find('.validation_type').val(msg.validation_type).trigger('change.select2');\r\n                        }\r\n                        /*show tel input type*/\r\n                        if (group_message.find('.input_type').val() == template_input[type_tel]) {\r\n                            group_message.find('.tel_input_type').removeClass('hidden');\r\n                            if(msg.tel_input_type != void 0 && msg.tel_input_type != '') {\r\n                                group_message.find('.tel_input_type_select').val(msg.tel_input_type).trigger('change.select2');\r\n                                changeTypeTelInput();\r\n                            }\r\n                        }\r\n                        /*show min max lengh input password*/\r\n                        if( (msg.min_length != '' || msg.max_length != '') && (msg.template_type == template_input[type_password] || msg.template_type == template_input[type_password_confirm])) {\r\n                            group_message.find('#min_length').val(msg.min_length);\r\n                            group_message.find('#max_length').val(msg.max_length);\r\n                            group_message.find('.lengh_password').removeClass('hidden');\r\n                            passwordLength();\r\n                        }\r\n                        if(msg.list != void 0 && msg.list.length) {\r\n                            var clone;\r\n                            if (msg.list.length == 1){\r\n                                clone = $('.scenario_block_origin .input_box_child .one_input').clone();\r\n                                var template_input = common_data['template_input'];\r\n                                if (msg.template_type != template_input[type_text]){\r\n                                    clone.find('.change_input').addClass('hide');\r\n                                }\r\n                            }else if (msg.list.length == 2 && msg.template_type == template_input[type_text]){\r\n                                clone = $('.scenario_block_origin .input_box_child .two_input').clone();\r\n                            }else if (msg.list.length == 2 && (msg.template_type == template_input[type_password_confirm] || msg.template_type == template_input[type_mail_confirm])){\r\n                                clone = $('.scenario_block_origin .input_box_child .confirm_input').clone();\r\n                            }else if (msg.list.length == 3 && (msg.template_type == template_input[type_tel])){\r\n                                clone = $('.scenario_block_origin .input_box_child .tel_input_hyphen').clone();\r\n                            }\r\n                            clone.find('input.content').each(function (ind, item) {\r\n                                $(item).val(msg.list[ind]['placeholder']);\r\n                            });\r\n                            group_message.append(clone);\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        changeTypeInput();\r\n                    }\r\n                        break;\r\n                    case type[type_postal_code]: {\r\n                        group_message = $('.scenario_block_origin .postal_code_box').clone();\r\n                        if(msg.list != void 0 && msg.list.length) {\r\n                            var item_input = [];\r\n                            var placeholder = [];\r\n                            $(msg.list).each(function (i, e) {\r\n                                item_input.push(e.type);\r\n                                placeholder.push(e.placeholder);\r\n                            });\r\n                            group_message.find('input.content').each(function (ind, item) {\r\n                                if (item_input) {\r\n                                    if (item_input.indexOf($(item).attr('id')) == -1) {\r\n                                        $(item).closest('.input_item').remove();\r\n                                    }else {\r\n\r\n                                    }\r\n                                }\r\n                            });\r\n                            group_message.find('input.content').each(function (ind, item) {\r\n                                if (msg.list[ind] != undefined) {\r\n                                    $(item).val(msg.list[ind]['placeholder']);\r\n                                }\r\n                            });\r\n                        }else {\r\n                            group_message.find('.input_item').remove();\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                    }\r\n                        break;\r\n                    case type[type_pulldown]: {\r\n                        var template_pulldown   = common_data['template_pulldown'],\r\n                            birthday = $('.scenario_block_origin .pulldown_box_child .birthday').clone(),\r\n                            birthday_y_m = $('.scenario_block_origin .pulldown_box_child .birthday_y_m').clone(),\r\n                            date = $('.scenario_block_origin .pulldown_box_child .date').clone(),\r\n                            month_date = $('.scenario_block_origin .pulldown_box_child .month_date').clone(),\r\n                            time = $('.scenario_block_origin .pulldown_box_child .time').clone(),\r\n                            towns_and_villages = $('.scenario_block_origin .pulldown_box_child .towns_and_villages').clone(),\r\n                            date_time = $('.scenario_block_origin .pulldown_box_child .date_time').clone(),\r\n                            period_of_time = $('.scenario_block_origin .pulldown_box_child .period_of_time').clone(),\r\n                            period_of_day = $('.scenario_block_origin .pulldown_box_child .period_of_day').clone();\r\n\r\n                        group_message = $('.scenario_block_origin .pulldown_group').clone();\r\n                        if(msg.template_type != void 0 && msg.template_type != '') {\r\n                            group_message.find('.pulldown_type').val(msg.template_type).trigger('change.select2');\r\n                        }\r\n                        if(msg.list != void 0) {\r\n                            // group_message.find('.content').remove();\r\n                            if (msg.template_type == template_pulldown[type_birthday]) {\r\n                                group_message.append(birthday);\r\n                            }else if(msg.template_type == template_pulldown[type_birthday_y_m]){\r\n                                group_message.append(birthday_y_m);\r\n                            }else if (msg.template_type == template_pulldown[type_date]) {\r\n                                group_message.append(date);\r\n                            }else if (msg.template_type == template_pulldown[type_month_date]) {\r\n                                group_message.append(month_date);\r\n                            }else if (msg.template_type == template_pulldown[type_time]) {\r\n                                group_message.append(time);\r\n                                if (msg.spacing_minute != void 0 && msg.spacing_minute != '') {\r\n                                    group_message.find('.spacing_minute').val(msg.spacing_minute).trigger('change.select2');\r\n                                }\r\n                                changeOptionSelectMinute(group_message.find('.minute'), group_message.find('.spacing_minute').val());\r\n                            }else if (msg.template_type == template_pulldown[type_date_time]) {\r\n                                group_message.append(date_time);\r\n                                if (msg.spacing_minute != void 0 && msg.spacing_minute != '') {\r\n                                    group_message.find('.spacing_minute').val(msg.spacing_minute).trigger('change.select2');\r\n                                }\r\n                                changeOptionSelectMinute(group_message.find('.minute'), group_message.find('.spacing_minute').val());\r\n                            }else if (msg.template_type == template_pulldown[type_period_of_time]) {\r\n                                group_message.append(period_of_time);\r\n                                if (msg.start_spacing_minute != void 0 && msg.start_spacing_minute != '') {\r\n                                    group_message.find('.start_time .spacing_minute').val(msg.start_spacing_minute).trigger('change.select2');\r\n                                    changeOptionSelectMinute(group_message.find('.start_time .minute'), group_message.find('.start_time .spacing_minute').val());\r\n                                }\r\n                                if (msg.end_spacing_minute != void 0 && msg.end_spacing_minute != '') {\r\n                                    group_message.find('.end_time .spacing_minute').val(msg.end_spacing_minute).trigger('change.select2');\r\n                                    changeOptionSelectMinute(group_message.find('.end_time .minute'), group_message.find('.end_time .spacing_minute').val());\r\n                                }\r\n                            }else if (msg.template_type == template_pulldown[type_period_of_day]) {\r\n                                group_message.append(period_of_day);\r\n                            }else if (msg.list.length && msg.template_type == template_pulldown[type_customize]) {\r\n                                var clone = $('.scenario_block_origin .customize').clone();\r\n                                if (msg.first_title != '' || msg.last_title != '') {\r\n                                    clone.find('.pulldown_first_title').val(msg.first_title);\r\n                                    clone.find('.pulldown_last_title').val(msg.last_title);\r\n                                }\r\n                                if (msg.list.length == 1) {\r\n                                    $(msg.list[0]).each(function (i, label) {\r\n                                        var item_clone = $('.scenario_block_origin .pulldown_box_child .customize_one_pulldown_item').clone();\r\n                                        item_clone.find('input.pulldown_label').val(label);\r\n                                        // clone.find('.pulldown_item').append(item_clone);\r\n                                        item_clone.insertBefore(clone.find('.pulldown_item .add_item_box'));\r\n                                        group_message.find('.pulldown_container').append(clone);\r\n                                    });\r\n                                }else {\r\n                                    $(msg.list[0]).each(function (i, label) {\r\n                                        var item_clone = $('.scenario_block_origin .pulldown_box_child .customize_two_pulldown_item').clone();\r\n                                        item_clone.find('.first_pulldown input.pulldown_label').val(label);\r\n                                        item_clone.find('.last_pulldown input.pulldown_label').val(msg.list[1][i]);\r\n                                        clone.find('.pulldown_item').append(item_clone);\r\n                                        group_message.find('.pulldown_container').append(clone);\r\n                                    });\r\n                                    group_message.find('.one_pulldown').addClass('hidden');\r\n                                    group_message.find('.two_pulldown').removeClass('hidden');\r\n                                }\r\n                                checkPulldownBox();\r\n                            }else if (msg.template_type == template_pulldown[type_provinces_of_japan]) {\r\n                                fillDataPulldownProvinces(group_message);\r\n                            }else if (msg.template_type == template_pulldown[type_towns_and_villages_of_japan]) {\r\n                                group_message.append(towns_and_villages);\r\n                                if (msg.first_title != '' || msg.last_title != '') {\r\n                                    group_message.find('.pulldown_first_title').val(msg.first_title);\r\n                                    group_message.find('.pulldown_last_title').val(msg.last_title);\r\n                                }\r\n                            }\r\n                        }\r\n                        if (msg.comment != void 0 && msg.comment != '') {\r\n                            group_message.find('.comment').val(msg.comment)\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        changeTypePulldown();\r\n                        btnAddItem();\r\n                        //create checkbox if not exist and show, hide delete radio item label\r\n                    }\r\n                        break;\r\n                    case type[type_terms_of_use]: {\r\n                        group_message = $('.scenario_block_origin .terms_of_use_group').clone();\r\n                        var template_term_of_use = common_data['template_term_of_use'];\r\n                        if(msg.template_type != void 0 && msg.template_type != '') {\r\n                            group_message.find('.term_of_use_type').val(msg.template_type).trigger('change.select2');\r\n                        }\r\n                        if(group_message.find('.term_of_use_type').val() ==  template_term_of_use[type_detail_content]) {\r\n                            group_message.find('.link_input').addClass('hide');\r\n                            group_message.find('.add_link_input').addClass('hide');\r\n                            group_message.find('.textarea_input').removeClass('hide');\r\n                            if(msg.content != void 0 && msg.content != '') {\r\n                                group_message.find('.input_text_type').val(msg.content);\r\n                            }\r\n                        }else {\r\n                            group_message.find('.textarea_input').addClass('hide');\r\n                            group_message.find('.link_input').removeClass('hide');\r\n                            group_message.find('.add_link_input').removeClass('hide');\r\n\r\n                            if(msg.list != void 0 && msg.list.length) {\r\n                                $(msg.list).each(function (i, link_item) {\r\n                                    var clone = $('.scenario_block_origin .item_link').clone();\r\n                                    if(link_item.link != void 0 && link_item.link != '') {\r\n                                        clone.find('.url').val(link_item.link);\r\n                                    }\r\n                                    if(link_item.link_text != void 0 && link_item.link_text != '') {\r\n                                        clone.find('.link_text').val(link_item.link_text);\r\n                                    }\r\n                                    if(link_item.link_first_title != void 0 && link_item.link_first_title != '') {\r\n                                        clone.find('.link_first_title').val(link_item.link_first_title);\r\n                                    }\r\n                                    if(link_item.link_last_title != void 0 && link_item.link_last_title != '') {\r\n                                        clone.find('.link_last_title').val(link_item.link_last_title);\r\n                                    }\r\n                                    group_message.find('.link_input').append(clone);\r\n                                });\r\n                            }\r\n                            checkItemLink();\r\n                            // if(msg.link != void 0 && msg.link != '') {\r\n                            //     group_message.find('.link_input .url').val(msg.link);\r\n                            // }\r\n                            // if(msg.link_text != void 0 && msg.link_text != '') {\r\n                            //     group_message.find('.link_input .link_text').val(msg.link_text);\r\n                            // }\r\n                            // if(msg.link_first_title != void 0 && msg.link_first_title != '') {\r\n                            //     group_message.find('.link_input .link_first_title').val(msg.link_first_title);\r\n                            // }\r\n                            // if(msg.link_last_title != void 0 && msg.link_last_title != '') {\r\n                            //     group_message.find('.link_input .link_last_title').val(msg.link_last_title);\r\n                            // }\r\n                        }\r\n                        if(msg.text_confirm != void 0 && msg.text_confirm != '') {\r\n                            group_message.find('.text_confirm_label').val(msg.text_confirm);\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        messageTextComplete();\r\n                        btnAddItem();\r\n                    }\r\n                        break;\r\n                    case type[type_confirmation]: {\r\n                        group_message = $('.scenario_block_origin .confirmation_group').clone();\r\n\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                    }\r\n                        break;\r\n                    case type[type_file]: {\r\n                        group_message = $('.scenario_block_origin .upload_file_group').clone();\r\n                        if (msg.file_type != void 0 && msg.file_type.length) {\r\n                            group_message.find('.file_type').val(msg.file_type);\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                    }\r\n                        break;\r\n                    case type[type_calendar]: {\r\n                        var template_calendar = common_data['template_calendar'];\r\n                        group_message = $('.scenario_block_origin .calendar_group').clone();\r\n                        if(msg.template_type != void 0 && msg.template_type != '') {\r\n                            group_message.find('.calendar_type').val(msg.template_type).trigger('change.select2');\r\n                        }\r\n                        var input_start_date;\r\n                        if(msg.start_date != void 0 && msg.start_date != '') {\r\n                            var start_date_input = group_message.find('.input_start_date');\r\n                            start_date_input.val(msg.start_date);\r\n                            start_date_input.datetimepicker({\r\n                                sideBySide: true,\r\n                                format: 'Y/MM/DD',\r\n                                ignoreReadonly: true\r\n                            }).on('dp.change', function () {\r\n                                getDataFromInput();\r\n                            });\r\n                            input_start_date = msg.start_date;\r\n                        }\r\n                        // }else {\r\n                        //     input_start_date = getDateTime();\r\n                        // }\r\n                        if (group_message.find('.calendar_type').val() == template_calendar[type_calendar_embed] && group_message.find('.embed_calendar').hasClass('hidden')) {\r\n                            group_message.find('.select_calendar').addClass('hidden');\r\n                            group_message.find('.embed_calendar').removeClass('hidden');\r\n                            group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                            // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                            group_message.find('.embeb_datepicker').empty().datetimepicker({\r\n                                inline: true,\r\n                                format: 'Y/MM/DD',\r\n                                minDate : (input_start_date != '') ? input_start_date : false\r\n                            });\r\n                        }else if(group_message.find('.calendar_type').val() == template_calendar[type_calendar_period_of_time] && group_message.find('.calendar_period_of_time').hasClass('hidden')){\r\n                            group_message.find('.select_calendar').addClass('hidden');\r\n                            group_message.find('.calendar_period_of_time').removeClass('hidden');\r\n                            group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                            // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                            initDateTimePickerPeriodOfTime(input_start_date);\r\n                        } else {\r\n                            var group = initCalendarType(input_start_date);\r\n                            //\r\n                            if(msg.title != void 0 && msg.title != '') {\r\n                                changeStatusLabel(group, msg.title, msg.title_flg);\r\n                            }\r\n                            if(msg.start_date != void 0 && msg.start_date != '') {\r\n                                var start_date_input = group.find('.input_start_date');\r\n                                start_date_input.val(msg.start_date);\r\n                                start_date_input.datetimepicker({\r\n                                    sideBySide: true,\r\n                                    format: 'Y/MM/DD',\r\n                                    ignoreReadonly: true\r\n                                }).on('dp.change', function () {\r\n                                    getDataFromInput();\r\n                                });\r\n                            }\r\n                            icheck_change_event = false;\r\n                            if(msg.variable_id != void 0 && msg.variable_id != '') {\r\n                                group.find('input.btn_is_variable').iCheck('check');\r\n                                group.find('.variable_group').removeClass('hidden');\r\n                                group.find('select.button_variable').val(msg.variable_id);\r\n                            }\r\n                            //change value is weekend off\r\n                            if(msg.weekend_off_flg != void 0 && msg.weekend_off_flg != 0 && group_message.find('input.btn_is_weekend_off').length) {\r\n                                group.find('input.btn_is_weekend_off').iCheck('check');\r\n                                var calendar_weekend_off = group.find('.select_calendar input.datetimepicker');\r\n                                calendar_weekend_off.data(\"DateTimePicker\").destroy();\r\n                                initCalendarWeekendOff(calendar_weekend_off, input_start_date);\r\n                            }\r\n                            if(msg.required_flg != void 0 && msg.required_flg != 0 && group.find('input.btn_is_required').length) {\r\n                                group.find('input.btn_is_required').iCheck('check');\r\n                            }\r\n                            icheck_change_event = true;\r\n                        }\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        changeStatusWeekendOff(group_message);\r\n                        changeCalendarType();\r\n                    }\r\n                        break;\r\n                    case type[type_text]: {\r\n                        group_message = $('.scenario_block_origin .label_group').clone();\r\n                        if(msg.content != void 0 && msg.content != '') {\r\n                            group_message.find('.input_text_type').val(msg.content);\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                    }\r\n                        break;\r\n                    case type[type_carousel]: {\r\n                        // //remove all generic before action\r\n                        // $('.message_bot_area .generic_group .generic_container .generic_box').remove();\r\n                        // $('.message_bot_area .generic_indicators li').remove();\r\n\r\n                        group_message = $('.scenario_block_origin .generic_group').clone();\r\n                        //remove all generic before action\r\n                        group_message.find('.generic_container .generic_box').remove();\r\n                        $('.message_bot_area .generic_indicators li').remove();\r\n\r\n                        if(msg.list != void 0 && msg.list.length) {\r\n                            $(msg.list).each(function (i, element) {\r\n                                var clone = $('.scenario_block_origin .generic_box').clone();\r\n                                clone.find('input.title').val(element.title);\r\n                                clone.find('input.sub_title').val(element.subtitle);\r\n                                clone.find('input.item_url').val(element.item_url);\r\n                                clone.find('input.image_url').val(element.image_url);\r\n                                clone.find('input.button_title').val(element.button.title);\r\n\r\n                                group_message.find('.generic_container').append(clone);\r\n                                group_message.find('.generic_box:first-child').addClass('active');\r\n                                //------Carousel process\r\n                                //set active for first item\r\n                                addCarouselIndicator('generic_indicators', true);\r\n                                // checkCarouselSlide();\r\n\r\n                                //check to show, hide button delete box\r\n                                checkGenericBox();\r\n                            });\r\n                        }else {\r\n                            //add first generic box\r\n                            createCarouselBox(group_message);\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        group_message.closest('.message_bot_area').find('.generic_indicators li').removeClass('active');\r\n                        group_message.closest('.message_bot_area').find('.generic_indicators li:first-child').addClass('active');\r\n                        group_message.closest('.message_bot_area').find('.footer_message_input .carousel_slide').show();\r\n                        checkCarouselSlide();\r\n                        addItemCarouselBox();\r\n                        initslide();\r\n                        slideCarousel();\r\n                    }\r\n                        break;\r\n                    case type[type_card_payment]: {\r\n                        group_message = $('.scenario_block_origin .card_payment_group').clone();\r\n\r\n                        if(msg.list != void 0 && msg.list.length) {\r\n                            var item_input = [];\r\n                            var placeholder = [];\r\n                            $(msg.list).each(function (i, e) {\r\n                                group_message.find('input#' + e.type).val(e.placeholder);\r\n                            });\r\n                        }\r\n                        if(msg.card_type != void 0 && msg.card_type.length) {\r\n                            $(msg.card_type).each(function (i, e) {\r\n                                var card_check = group_message.find('input.btn_is_card_type[value=\"'+ e + '\"]');\r\n                                if(card_check.length){\r\n                                    icheckAuto('check', card_check);\r\n                                }\r\n                            });\r\n                        }\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        // $('.message_bot_area .fixedsidebar-content').append(group_message);\r\n                        initIcheck(group_message.find('.card_type input'));\r\n                    }\r\n                        break;\r\n                    case type[type_captcha]: {\r\n                        group_message = $('.scenario_block_origin .captcha_group').clone();\r\n                        if(msg.captcha_type != void 0 && msg.captcha_type!= '' || msg.size != void 0 && msg.size!= '' || msg.color != void 0 && msg.color!= '') {\r\n                            group_message.find('.captcha_type').val(msg.captcha_type).trigger('change.select2');\r\n                            group_message.find('.size').val(msg.size);\r\n                            group_message.find('.captcha_color').val(msg.color).trigger('change.select2');\r\n                        }\r\n                        previewCaptcha(group_message);\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                    }\r\n                        break;\r\n                    case type[type_add_to_cart]: {\r\n                        group_message = initAddToCartType();\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                    }\r\n                        break;\r\n                    case type[type_request_document]: {\r\n                        group_message = initDocumentType();\r\n                        group_message.insertBefore($('.message_bot_area .fixedsidebar-content .text_button_next'));\r\n                        if(msg.template_type != void 0 && msg.template_type != '') {\r\n                            group_message.find('.document_type').val(msg.template_type).trigger('change.select2');\r\n                        }\r\n                        demoTemplateDocument(group_message);\r\n                        changeTypeDocument();\r\n                    }\r\n                        break;\r\n                }\r\n                // change label status\r\n                if(msg.title != void 0 && msg.title != '') {\r\n                    changeStatusLabel(group_message, msg.title, msg.title_flg);\r\n                }\r\n                //change value variable\r\n                icheck_change_event = false;\r\n                if(msg.variable_id != void 0 && msg.variable_id != '') {\r\n                    group_message.find('input.btn_is_variable').iCheck('check');\r\n                    group_message.find('.variable_group').removeClass('hidden');\r\n                    group_message.find('select.button_variable').val(msg.variable_id);\r\n                }\r\n                //change value is required\r\n                if(msg.required_flg != void 0 && msg.required_flg != 0 && group_message.find('input.btn_is_required').length) {\r\n                    group_message.find('input.btn_is_required').iCheck('check');\r\n                }\r\n                //change value is input requiment one\r\n                if (input_requiment_flg_val != '' && input_requiment_flg_val == 1) {\r\n                    $('.message_bot_area .fixedsidebar-content .checkbox_requirement_one input.btn_is_input_requiment').iCheck('check');\r\n                    group_message.find('.is_required').hide();\r\n                    icheckAuto('uncheck', group_message.find('.is_required'));\r\n                }\r\n                icheck_change_event = true;\r\n            }\r\n        });\r\n    }\r\n    //fill text button next\r\n    if(jsonData['text_button_next'] != void 0 && jsonData['text_button_next'] != '') {\r\n        $('.footer_message_input .text_button_next input.content').val(jsonData['text_button_next']);\r\n    }\r\n    setActiveLastGroupMsg();\r\n    //check error input in message box and push notice\r\n    checkErrorBoxMessage();\r\n    check_add_item_common();\r\n    initSelect2();\r\n    // btnAddItem();\r\n}\r\nfunction changeStatusLabel(group_message, title, title_flg) {\r\n    group_message.find('.input_label').removeClass('hide');\r\n    group_message.find('.input_label .title').val(title);\r\n    group_message.find('.input_label_type').val(title_flg).trigger('change.select2');\r\n}\r\n/**\r\n * check if string can converse to json\r\n * @param value\r\n * @returns {boolean}\r\n */\r\nfunction jsonConverse(value){\r\n    try{\r\n        var result = JSON.parse(value);\r\n        return result;\r\n    } catch (error){\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * return file type from url\r\n * @param url\r\n * @returns {boolean}\r\n */\r\nfunction checkTypeFile(url) {\r\n    var extension       = url.substring(url.lastIndexOf('.') + 1).toLowerCase(),\r\n        image_file_type = ['jpg', 'jpeg', 'png', 'bmp', 'gif', 'bmp'],\r\n        video_file_type = ['3gp', '3g2', '3gp', 'asf', 'dat', 'divx', 'dv', 'f4v', 'm2ts', 'm4v', 'mkv', 'mod', 'mov', 'mp4', 'mpe', 'mpeg', 'mpeg4', 'mpg', 'mts', 'nsv', 'ogm', 'ogv', 'qt', 'tod', 'ts', 'vob', 'wmv'],\r\n        other_file_type = ['pdf'],\r\n        result          = false;\r\n\r\n    if (image_file_type.includes(extension)) {\r\n        result = 'image';\r\n    } else if(video_file_type.includes(extension)) {\r\n        result = 'video';\r\n    } else if(other_file_type.includes(extension)) {\r\n        result = 'file';\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction changeLabelMediaDemo(value) {\r\n    var content             = '',\r\n        bot_message_input   = botMessageBoxElement(),\r\n        bot_type            = bot_message_input.find('.bot_media_demo .bot_type');\r\n\r\n    if(value != void 0 && value != '') {\r\n        content = bot_type.data(value.toLowerCase());\r\n        // console.log('key:' + value);\r\n        // console.log('-> ' + content);\r\n        bot_type.removeClass('hidden');\r\n    } else {\r\n        bot_type.addClass('hidden');\r\n    }\r\n    bot_type.html(content);\r\n}\r\nfunction changeLabelUserMediaDemo(value) {\r\n    var content             = '',\r\n        user_message_input   = userMessageBoxElement(),\r\n        user_type            = user_message_input.find('.user_media_demo .user_type');\r\n\r\n    if(value != void 0 && value != '') {\r\n        content = user_type.data(value.toLowerCase());\r\n        user_type.removeClass('hidden');\r\n    } else {\r\n        user_type.addClass('hidden');\r\n    }\r\n    user_type.html(content);\r\n}\r\n\r\n/**\r\n * re-set hieght for right sldiebar\r\n */\r\nfunction setHeightSlidebar() {\r\n    var windown_w       = $( window ).width(),\r\n        windown_h       = $( window ).height(),\r\n        fixedsidebar    = $('.fixedsidebar'),\r\n        fixedsidebar_content = fixedsidebar.find('.fixedsidebar-content');\r\n\r\n    //show save button\r\n    $('.message_container_input .update_scenario').removeClass('hidden');\r\n\r\n    //set height, slidebar height = screen height - elements\r\n    var nav_top             = $('.top-nav').height(),\r\n        space               = 40,\r\n        height_main         = windown_h - nav_top,\r\n        common_error_box    = $('.message_bot_area .common_error'),\r\n        filler_box          = fixedsidebar.find('.filter_group'),\r\n        footer_box          = fixedsidebar.find('.footer_message_input'),\r\n        update_scenario_box = fixedsidebar.find('.update_scenario'),\r\n        group_box_header    = 0;\r\n\r\n    if(common_error_box.length) {\r\n        group_box_header += common_error_box.innerHeight() + parseInt(common_error_box.css('margin-bottom'));\r\n    }\r\n\r\n    var height_box = height_main  - space - group_box_header - update_scenario_box.innerHeight() - filler_box.innerHeight() - footer_box.innerHeight();\r\n    fixedsidebar_content.slimscroll({\r\n        height: height_box + 'px'\r\n    });\r\n}\r\n\r\nfunction initIcheck(element) {\r\n    if(element != void 0 && element) {\r\n        element.iCheck({\r\n            checkboxClass: 'icheckbox_minimal',\r\n            radioClass: 'iradio_minimal'\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * click to per messages to fill data and validate\r\n */\r\nfunction validateMessages() {\r\n    var msg_box_active = $('.scenario_block .message_box.active');\r\n    //re-fill data of current bot message for validate\r\n    setBotDataToForm();\r\n    $('.scenario_block .message_box.bot_scenario').each(function (i, e) {\r\n        $(this).click();\r\n    });\r\n    //re-active to active\r\n    if(msg_box_active.length) {\r\n        msg_box_active.click();\r\n    }\r\n}\r\n\r\n/**\r\n * check Error and set border color for Box Message\r\n */\r\nfunction checkErrorBoxMessage() {\r\n    var result = true;\r\n    var form_box            = '',\r\n        bot_message_type    = botMessageType(),\r\n        type                = common_data['bot_content_type'];\r\n\r\n    switch (bot_message_type) {\r\n        /*case type[type_text]:\r\n            form_box = $('.message_bot_area .text_group');\r\n            break;\r\n        case type[type_button]:\r\n            form_box = $('.message_bot_area .button_group');\r\n            break;\r\n        case type[type_generic]:\r\n            form_box = $('.message_bot_area .generic_group');\r\n            break;\r\n        case type[type_file]:\r\n            form_box = $('.message_bot_area .file_group');\r\n            break;\r\n        case type[type_quick_replies]:\r\n            form_box = $('.message_bot_area .quick_replies_group');\r\n            break;\r\n        case type[type_api]:\r\n            form_box = $('.message_bot_area .api_group');\r\n            break;\r\n        case type[type_scenario_connect]:\r\n            form_box = $('.message_bot_area .scenario_connect_group');\r\n            break;\r\n        case type[type_mail]:\r\n            form_box = $('.message_bot_area .mail_group');\r\n            break;*/\r\n        case type[type_card_payment]:\r\n            form_box = $('.message_bot_area .card_payment_group');\r\n            break;\r\n    }\r\n\r\n    var form_style        = {'border' : ''},\r\n        bot_box           = botMessageBoxElement(),\r\n        bot_media_content = bot_box.find('.bot_media_content');\r\n    if(form_box != void 0 && form_box != '' && form_box.length) {\r\n        var validate      = validation_scenario('efo', form_box, bot_message_type);\r\n        //if not demo bot input (bot_media_content) then get messages_bot_content (only text type)\r\n        if(!bot_media_content.length) {\r\n            bot_media_content = bot_box.find('.messages_bot_content');\r\n        }\r\n\r\n        if(!validate) {\r\n            result = false;\r\n            form_style        = {'border' : '1px solid #ff5f5f'};\r\n        }\r\n    }\r\n    setStyleElm(bot_media_content, form_style);\r\n    return result;\r\n}\r\n\r\n/**\r\n * set style for element\r\n */\r\nfunction setStyleElm(elm, style) {\r\n    if(elm != void 0 && elm != '' && elm.length && style != void 0 && style != '') {\r\n        elm.css(style);\r\n    }\r\n}\r\n\r\n/**\r\n * set select first option for select input\r\n * @param elm\r\n */\r\nfunction selectFirstOption(elm) {\r\n    elm.val(elm.find('option').first().val());\r\n}\r\n/*change input number in input type*/\r\nfunction inputGroupChangeNumber() {\r\n    setTimeout(function(){\r\n        var bot_message_type    = botMessageType(),\r\n            type                = common_data['bot_content_type'],\r\n            input_group         = $('.message_container_input .input_box.active'),\r\n            one_input = $('.scenario_block_origin .input_box_child .one_input').clone(),\r\n            two_input = $('.scenario_block_origin .input_box_child .two_input').clone();\r\n        if(input_group.length && bot_message_type == type[type_input]) {\r\n            if (input_group.find('.input_item').length) {\r\n                if(input_group.find('.input_item').hasClass('one_input')) {\r\n                    input_group.find('.one_input').remove();\r\n                    input_group.append(two_input);\r\n                } else {\r\n                    input_group.find('.two_input').remove();\r\n                    input_group.append(one_input);\r\n                }\r\n            } else {\r\n                input_group.append(one_input);\r\n            }\r\n            getDataFromInput();\r\n        }\r\n    }, 100);\r\n\r\n}\r\n//auto suggest variable by textcomplete\r\nfunction messageTextComplete() {\r\n    var variable_list = common_data['variable_list'];\r\n    $('.text_group .input_text_type, .textarea_box .readonly, textarea.terms_of_user_content').textcomplete([\r\n        {\r\n            match: /@(\\w*)$/,\r\n            search: function (term, callback) {\r\n                callback($.map(variable_list, function (element) {\r\n                    return element.indexOf(term) === 0 ? element : null;\r\n                }));\r\n            },\r\n            index: 1,\r\n            replace: function (element) {\r\n                return ['\\{\\{' + element + '}}', ''];\r\n            }\r\n        }\r\n    ], {\r\n        maxCount: 1000\r\n    }).on({\r\n        'textComplete:hide': function (e) {\r\n            // getDataFromInput();\r\n            if(message_type_bot) {\r\n                getDataFromInput();\r\n            } else {\r\n                getDataUserFromInput();\r\n            }\r\n        }\r\n    });\r\n}\r\n/*event change input type*/\r\nfunction changeTypeInput() {\r\n    var template_input = common_data['template_input'];\r\n    $(document).on(\"change\", '.input_box .input_type', function (event) {\r\n        var input_group = $('.message_container_input .input_box.active');\r\n        input_group.find('.lengh_password').addClass('hidden');\r\n        input_group.find('.tel_input_type').addClass('hidden');\r\n        if ($(this).val() == template_input[type_text]) {\r\n            if (input_group.find('.input_item').hasClass('confirm_input')) {\r\n                input_group.find('.confirm_input').remove();\r\n            }\r\n            inputGroupChangeNumber();\r\n            input_group.find('.validation_text').removeClass('hidden');\r\n            input_group.find('.lengh_password').removeClass('hidden');\r\n        }else {\r\n            if ($(this).val() == template_input[type_password] || $(this).val() == template_input[type_password_confirm]) {\r\n                input_group.find('.lengh_password').removeClass('hidden');\r\n                passwordLength();\r\n            }\r\n            input_group.find('.validation_text').addClass('hidden');\r\n\r\n            var one_input = $('.scenario_block_origin .input_box_child .one_input').clone(),\r\n                confirm_input = $('.scenario_block_origin .input_box_child .confirm_input').clone();\r\n            if ($(this).val() == template_input[type_mail_confirm] || $(this).val() == template_input[type_password_confirm]) {\r\n                if(input_group.find('.input_item').hasClass('one_input')) {\r\n                    input_group.find('.one_input').remove();\r\n                }else if (input_group.find('.input_item').hasClass('two_input')) {\r\n                    input_group.find('.two_input').remove();\r\n                }\r\n                else if (input_group.find('.confirm_input').hasClass('confirm_input')) {\r\n                    input_group.find('.confirm_input').remove();\r\n                }\r\n                input_group.append(confirm_input);\r\n            }else {\r\n                if(input_group.find('.input_item').hasClass('two_input')) {\r\n                    input_group.find('.two_input').remove();\r\n                    input_group.append(one_input);\r\n                }else if (input_group.find('.input_item').hasClass('confirm_input')) {\r\n                    input_group.find('.confirm_input').remove();\r\n                    input_group.append(one_input);\r\n                }\r\n                input_group.find('.change_input').addClass('hide');\r\n            }\r\n            if ($(this).val() == template_input[type_tel]) {\r\n                input_group.find('.validation_text').addClass('hidden');\r\n                input_group.find('.tel_input_type').removeClass('hidden');\r\n                changeTypeTelInput();\r\n            }\r\n        }\r\n        getDataFromInput();\r\n    });\r\n}\r\n/*first init pulldown customize type*/\r\nfunction initPulldownFirst() {\r\n    var bot_message_type    = botMessageType(),\r\n        type                = common_data['bot_content_type'],\r\n        pulldown_group_active = $('.message_container_input .pulldown_group.active'),\r\n        customize = $('.scenario_block_origin .pulldown_box_child .customize').clone();\r\n    if(pulldown_group_active.length && bot_message_type == type[type_pulldown]) {\r\n        if (!pulldown_group_active.find('.content').length) {\r\n            pulldown_group_active.find('.pulldown_container').append(customize);\r\n            checkPulldownBox();\r\n        }\r\n    }\r\n}\r\n/*change pulldown number in pulldown type*/\r\nfunction customPulldownChangeNumber(btn_change) {\r\n    setTimeout(function(){\r\n        var item_pulldown = btn_change.closest('.pulldown_group.active').find('.pulldown_item .item'),\r\n            list_item_pulldown = [];\r\n        item_pulldown.each(function (ind, item) {\r\n            if (btn_change.hasClass('one_pulldown')){\r\n                // get data in one pulldown\r\n                var label = $(item).find('input.pulldown_label').val();\r\n                list_item_pulldown.push(label);\r\n            }else {\r\n                //get first data in pulldown\r\n                var label = $(item).find('.first_pulldown input.pulldown_label').val();\r\n                list_item_pulldown.push(label);\r\n            }\r\n        });\r\n        btn_change.closest('.pulldown_group.active').find('.pulldown_item .item').remove();\r\n        if(list_item_pulldown != void 0 && list_item_pulldown.length) {\r\n            $(list_item_pulldown).each(function (ind, item) {\r\n                if (btn_change.hasClass('one_pulldown')){\r\n                    // clone two pulldown\r\n                    var clone = $('.scenario_block_origin .pulldown_box_child .customize_two_pulldown_item').clone();\r\n                    clone.find('.first_pulldown input.pulldown_label').val(item);\r\n                    // $('.message_container_input .pulldown_group.active .pulldown_item').append(clone);\r\n                    clone.insertBefore($('.message_container_input .pulldown_group.active .pulldown_item .add_item_box'));\r\n                }else {\r\n                    //clone one pulldown\r\n                    var clone = $('.scenario_block_origin .pulldown_box_child .customize_one_pulldown_item').clone();\r\n                    clone.find('input.pulldown_label').val(item);\r\n                    // $('.message_container_input .pulldown_group.active .pulldown_item').append(clone);\r\n                    clone.insertBefore($('.message_container_input .pulldown_group.active .pulldown_item .add_item_box'));\r\n                }\r\n            });\r\n        }\r\n       /* if (btn_change.hasClass('one_pulldown')){\r\n            // clone two pulldown\r\n            var clone = $('.scenario_block_origin .pulldown_box_child .customize_two_pulldown_item').clone();\r\n            $('.message_container_input .pulldown_group.active .pulldown_item').append(clone);\r\n        }else {\r\n            //clone one pulldown\r\n            var clone = $('.scenario_block_origin .pulldown_box_child .customize_one_pulldown_item').clone();\r\n            $('.message_container_input .pulldown_group.active .pulldown_item').append(clone);\r\n        }*/\r\n        checkPulldownBox();\r\n        getDataFromInput();\r\n    }, 100);\r\n\r\n}\r\n/*event change type in pulldown group*/\r\nfunction changeTypePulldown() {\r\n    var template_pulldown   = common_data['template_pulldown'],\r\n        birthday = $('.scenario_block_origin .pulldown_box_child .birthday').clone(),\r\n        birthday_y_m = $('.scenario_block_origin .pulldown_box_child .birthday_y_m').clone(),\r\n        date = $('.scenario_block_origin .pulldown_box_child .date').clone(),\r\n        month_date = $('.scenario_block_origin .pulldown_box_child .month_date').clone(),\r\n        time = $('.scenario_block_origin .pulldown_box_child .time').clone(),\r\n        towns_and_villages = $('.scenario_block_origin .pulldown_box_child .towns_and_villages').clone(),\r\n        date_time = $('.scenario_block_origin .pulldown_box_child .date_time').clone(),\r\n        customize = $('.scenario_block_origin .pulldown_box_child .customize').clone(),\r\n        period_of_time = $('.scenario_block_origin .pulldown_box_child .period_of_time').clone(),\r\n        period_of_day = $('.scenario_block_origin .pulldown_box_child .period_of_day').clone();\r\n        var is_call_select2 = true;\r\n        $('.pulldown_group.active .pulldown_type').on('change', function (e) {\r\n            var parent = $(this).closest('.pulldown_group.active');\r\n            parent.find('.content').remove();\r\n            if ($(this).val() == template_pulldown[type_birthday]) {\r\n                parent.append(birthday);\r\n            }else if($(this).val() == template_pulldown[type_birthday_y_m]){\r\n                parent.append(birthday_y_m);\r\n            }else if ($(this).val() == template_pulldown[type_date]) {\r\n                parent.append(date);\r\n            }else if ($(this).val() == template_pulldown[type_month_date]) {\r\n                parent.append(month_date);\r\n            }else if ($(this).val() == template_pulldown[type_time]) {\r\n                parent.append(time);\r\n                changeOptionSelectMinute();\r\n            }else if ($(this).val() == template_pulldown[type_date_time]) {\r\n                parent.append(date_time);\r\n                changeOptionSelectMinute();\r\n            }else if ($(this).val() == template_pulldown[type_period_of_time]) {\r\n                parent.append(period_of_time);\r\n                changeOptionSelectMinute();\r\n            }else if ($(this).val() == template_pulldown[type_period_of_day]) {\r\n                parent.append(period_of_day);\r\n            }else if ($(this).val() == template_pulldown[type_customize]) {\r\n                parent.find('.pulldown_container').append(customize);\r\n                checkPulldownBox();\r\n                btnAddItem();\r\n            }else if ($(this).val() == template_pulldown[type_provinces_of_japan]) {\r\n                fillDataPulldownProvinces(parent);\r\n            }else if ($(this).val() == template_pulldown[type_towns_and_villages_of_japan]) {\r\n                parent.append(towns_and_villages);\r\n            }\r\n\r\n            if (is_call_select2) {\r\n                // initSelect2();\r\n            }\r\n            check_add_item_common();\r\n            getDataFromInput();\r\n            is_call_select2 = false;\r\n        });\r\n        /*$(document).on(\"change\", '.pulldown_group.active .pulldown_type', function (event) {\r\n            var parent = $(this).closest('.pulldown_group.active');\r\n            parent.find('.content').remove();\r\n            if ($(this).val() == template_pulldown[type_birthday]) {\r\n                parent.append(birthday);\r\n            }else if ($(this).val() == template_pulldown[type_date]) {\r\n                parent.append(date);\r\n            }else if ($(this).val() == template_pulldown[type_month_date]) {\r\n                parent.append(month_date);\r\n            }else if ($(this).val() == template_pulldown[type_time]) {\r\n                parent.append(time);\r\n                changeOptionSelectMinute();\r\n            }else if ($(this).val() == template_pulldown[type_date_time]) {\r\n                parent.append(date_time);\r\n                changeOptionSelectMinute();\r\n            }else if ($(this).val() == template_pulldown[type_period_of_time]) {\r\n                parent.append(period_of_time);\r\n                changeOptionSelectMinute();\r\n            }else if ($(this).val() == template_pulldown[type_period_of_day]) {\r\n                parent.append(period_of_day);\r\n            }else if ($(this).val() == template_pulldown[type_customize]) {\r\n                parent.find('.pulldown_container').append(customize);\r\n                checkPulldownBox();\r\n            }else if ($(this).val() == template_pulldown[type_provinces_of_japan]) {\r\n                fillDataPulldownProvinces(parent);\r\n            }else if ($(this).val() == template_pulldown[type_towns_and_villages_of_japan]) {\r\n                parent.append(towns_and_villages);\r\n            }\r\n\r\n            if (is_call_select2) {\r\n                initSelect2();\r\n            }\r\n            check_add_item_common();\r\n            getDataFromInput();\r\n            is_call_select2 = false;\r\n        });*/\r\n}\r\n/*event change calendar type*/\r\nfunction changeCalendarType(){\r\n    var template_calendar = common_data['template_calendar'];\r\n    $(document).on(\"change\", '.calendar_group .calendar_type', function (event) {\r\n        var parent = $(this).closest('.calendar_group');\r\n        var input_start_date = parent.find('.input_start_date').val();\r\n        parent.find('div.is_weekend_off').addClass('hidden');\r\n        if ($(this).val() == template_calendar[type_calendar_select]) {\r\n            parent.find('.embed_calendar').addClass('hidden');\r\n            parent.find('.calendar_period_of_time').addClass('hidden');\r\n            parent.find('.select_calendar').removeClass('hidden');\r\n            parent.find('div.is_weekend_off').removeClass('hidden');\r\n            initDateTimePickerSelect(input_start_date);\r\n        }else if ($(this).val() == template_calendar[type_calendar_embed]) {\r\n            parent.find('.select_calendar').addClass('hidden');\r\n            parent.find('.calendar_period_of_time').addClass('hidden');\r\n            parent.find('.embed_calendar').removeClass('hidden');\r\n            parent.find('.embeb_datepicker').empty().datetimepicker({\r\n                inline: true,\r\n                format: 'Y/MM/DD',\r\n                minDate: (input_start_date != '') ? input_start_date : false\r\n            });\r\n        }else{\r\n            parent.find('.select_calendar').addClass('hidden');\r\n            parent.find('.embed_calendar').addClass('hidden');\r\n            parent.find('.calendar_period_of_time').removeClass('hidden');\r\n            initDateTimePickerPeriodOfTime(input_start_date);\r\n        }\r\n    });\r\n}\r\n/*show/hide checkbox weekend off*/\r\nfunction changeStatusWeekendOff(group) {\r\n    var template_calendar = common_data['template_calendar'];\r\n    if (group.find('.calendar_type').val() != template_calendar[type_calendar_select]) {\r\n        group.find('div.is_weekend_off').addClass('hidden');\r\n    }\r\n}\r\nfunction getDateTime(){\r\n    var fullDate = new Date();\r\n    var month = fullDate.getMonth()+1;\r\n    month = (month<10 ? '0' : '') + month;\r\n    var input_start_date = fullDate.getFullYear() + \"/\" + month + \"/\" + fullDate.getDate();\r\n    return input_start_date;\r\n}\r\nfunction initStartDateCalendar() {\r\n    $('.input_start_date').datetimepicker({\r\n        sideBySide: true,\r\n        format: 'Y/MM/DD',\r\n        ignoreReadonly: true,\r\n        // defaultDate: moment()\r\n    }).on('dp.change', function () {\r\n        getDataFromInput();\r\n    });\r\n}\r\nfunction initDateTimePickerSelect(input_start_date){\r\n    initStartDateCalendar();\r\n    $('.datetimepicker').datetimepicker({\r\n        sideBySide: true,\r\n        format: 'Y/MM/DD',\r\n        ignoreReadonly: true,\r\n        minDate: (input_start_date != '') ? input_start_date : false,\r\n    });\r\n    $('.message_bot_area .select_calendar .input-group-btn').on('click', function (event) {\r\n        $(this).parent('.select_calendar').find('.datetimepicker').focus();\r\n    });\r\n}\r\nfunction initCalendarWeekendOff(calendar_weekend_off , input_start_date){\r\n    calendar_weekend_off.datetimepicker({\r\n        sideBySide: true,\r\n        format: 'Y/MM/DD',\r\n        ignoreReadonly: true,\r\n        minDate: (input_start_date != '') ? input_start_date : false,\r\n        daysOfWeekDisabled: [0,6]\r\n    });\r\n}\r\nfunction initDateTimePickerPeriodOfTime(input_start_date){\r\n    initStartDateCalendar();\r\n    $('.startDate').datetimepicker({\r\n        format: 'Y/MM/DD',\r\n        allowInputToggle : true,\r\n        ignoreReadonly: true,\r\n        minDate: (input_start_date != '') ? input_start_date : false\r\n    });\r\n    $('.endDate').datetimepicker({\r\n        useCurrent: false,\r\n        format: 'Y/MM/DD',\r\n        allowInputToggle : true,\r\n        ignoreReadonly: true\r\n    });\r\n    $(\".startDate\").on(\"dp.change\", function (e) {\r\n        $('.endDate').data(\"DateTimePicker\").minDate(e.date);\r\n    });\r\n    $(\".endDate\").on(\"dp.change\", function (e) {\r\n        $('.startDate').data(\"DateTimePicker\").maxDate(e.date);\r\n    });\r\n    //\r\n    $('.message_bot_area .calendar_period_of_time .start').on('click', function (event) {\r\n        $(this).closest('.calendar_period_of_time').find('.startDate').focus();\r\n    });\r\n    $('.message_bot_area .calendar_period_of_time .end').on('click', function (event) {\r\n        $(this).closest('.calendar_period_of_time').find('.endDate').focus();\r\n    });\r\n}\r\n/*event change value pasword min max length*/\r\nfunction passwordLength(){\r\n    $(document).on('input change', '.input_box.active .lengh_password #min_length', function (event) {\r\n        var parent = $(this).closest('.lengh_password');\r\n        parent.find('#max_length').attr('min', $(this).val());\r\n    });\r\n    $(document).on('input change', '.input_box.active .lengh_password #max_length', function (event) {\r\n        var parent = $(this).closest('.lengh_password');\r\n        parent.find('#min_length').attr('max', $(this).val());\r\n    });\r\n}\r\n\r\n// init button filter\r\nfunction initFilterGroup() {\r\n    var filter_group = $('.scenario_block_origin .filter_group').clone();\r\n    if(message_type_bot) {\r\n        $('.message_bot_area').find('.filter_group').remove();\r\n        $('.message_bot_area').prepend(filter_group);\r\n        // checkbox input requiment\r\n        var checkbox_requirement_one = $('.scenario_block_origin .checkbox_requirement_one').clone();\r\n        $('.message_bot_area .fixedsidebar-content').append(checkbox_requirement_one);\r\n        var input_requiment = $('.message_container_input .checkbox_requirement_one').find('input.btn_is_input_requiment');\r\n        initIcheck(input_requiment);\r\n        //button next\r\n        var btn_next_group = $('.scenario_block_origin .text_button_next').clone();\r\n        $('.message_bot_area .fixedsidebar-content').append(btn_next_group);\r\n    } else {\r\n        $('.message_user_area').find('.filter_group').remove();\r\n        $('.message_user_area').prepend(filter_group);\r\n    }\r\n}\r\n/*event add item filter*/\r\nfunction addFilterItem() {\r\n    var filter_group;\r\n    if(message_type_bot) {\r\n        filter_group = $('.message_bot_area .filter_group');\r\n    } else {\r\n        filter_group = $('.message_user_area .filter_group');\r\n    }\r\n\r\n    if(filter_group.length) {\r\n        var filter_clone = $('.scenario_block_origin .filter_item').clone();\r\n        filter_group.find('.filter_contain').append(filter_clone);\r\n        var filter_index = filter_group.find('.filter_contain .filter_item').last().index();\r\n        if(filter_index >= 1 && ($('.template_filter .select_option').length)) {\r\n            var option_clone = $('.template_filter .select_option').clone();\r\n            var parent = filter_group.find('.filter_contain .filter_item').last().prepend(option_clone);\r\n            parent.find('.field_filter_option').addClass('hidden').attr('disabled', 'disabled');\r\n            parent.find('.filter_scenario_value .filter_scenario').addClass('hidden').attr('disabled', 'disabled');\r\n        }\r\n        indexFilterInput();\r\n\r\n        //set scroll\r\n        if(filter_group.find('.filter_contain .filter_item').length > 2) {\r\n            $(filter_group).find('.filter_contain').slimscroll({\r\n                height: '140px',\r\n                scrollTo: ($(filter_group).find('.filter_contain .filter_item').length * $(filter_group).find('.filter_contain .filter_item').outerHeight()) + 'px',\r\n            });\r\n        }\r\n        setHeightSlidebar();\r\n    }\r\n}\r\n//reset name for filter input\r\nfunction indexFilterInput() {\r\n    $('.message_form_area .filter_contain').each(function (i, filter_contain) {\r\n        if($(filter_contain).find('.filter_item').length) {\r\n            $(this).find('.filter_item').each(function (i, filter_item) {\r\n                var prefix_name = 'filter['+ i +']';\r\n                $(filter_item).find('select.filter_variable').attr('name', prefix_name +'[condition]');\r\n                $(filter_item).find('select.filter_operator').attr('name', prefix_name+ '[compare]');\r\n                $(filter_item).find('input.filter_value_text').attr('name', prefix_name+ '[value]');\r\n            });\r\n        }\r\n    });\r\n}\r\n//fill data to right slidebar\r\nfunction setFilterData(data) {\r\n    $('.filter_contain .filter_item').remove();\r\n\r\n    if(data != void 0 && data.length) {\r\n        $(data).each(function (i, e) {\r\n            var filter_item_last;\r\n           /* addFilterItem();\r\n            if(message_type_bot) {\r\n                filter_item_last = $('.message_bot_area .filter_contain .filter_item').last();\r\n            } else {\r\n                filter_item_last = $('.message_user_area .filter_contain .filter_item').last();\r\n            }\r\n            if(filter_item_last != void 0) {\r\n                filter_item_last.find('select.filter_variable').val(e.condition);\r\n                filter_item_last.find('select.filter_operator').val(e.compare);\r\n                filter_item_last.find('input.filter_value_text').val(e.value);\r\n            }*/\r\n           if (e != void 0 && e.length) {\r\n               $(e).each(function (ind, item) {\r\n                    addFilterItem();\r\n                    if(message_type_bot) {\r\n                        filter_item_last = $('.message_bot_area .filter_contain .filter_item').last();\r\n                    } else {\r\n                        filter_item_last = $('.message_user_area .filter_contain .filter_item').last();\r\n                    }\r\n                    if(filter_item_last != void 0) {\r\n                        filter_item_last.find('select.filter_option').val(item.option);\r\n                        filter_item_last.find('select.filter_variable').val(item.condition);\r\n                        filter_item_last.find('select.filter_operator').val(item.compare);\r\n                        filter_item_last.find('input.filter_value_text').val(item.value);\r\n                    }\r\n               })\r\n           }\r\n        });\r\n    }\r\n}\r\n//get filter data\r\nfunction getFilterData() {\r\n    var index = 0;\r\n    var result = [];\r\n    var message_area = $('.message_user_area');\r\n    if(message_type_bot) {\r\n        message_area = $('.message_bot_area');\r\n    }\r\n    if (message_area.find('.filter_contain .filter_item').length) {\r\n        result[index] = [];\r\n        message_area.find('.filter_contain .filter_item').each(function (i, e) {\r\n            var option_filter = $(this).find('select.filter_option').val(),\r\n                condition = $(this).find('select.filter_variable').val(),\r\n                compare = $(this).find('select.filter_operator').val(),\r\n                value = $(this).find('input.filter_value_text').val();\r\n\r\n            if (option_filter != undefined && option_filter == 'or') {\r\n                index++;\r\n                result[index] = [];\r\n            }\r\n            result[index].push({\r\n                'option' : option_filter,\r\n                'condition' : condition,\r\n                'compare' : compare,\r\n                'value' : value\r\n            });\r\n            /*result.push({\r\n                'condition' : condition,\r\n                'compare' : compare,\r\n                'value' : value\r\n            });*/\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction changeOptionSelectMinute(parent, spacing_minute) {\r\n    if (spacing_minute && parent.length) {\r\n        parent.find('option').not(':first').remove();\r\n        setOptionSelectMinute(parent, spacing_minute);\r\n    }\r\n\r\n    $(document).on(\"change\", '.time .spacing_minute, .date_time .spacing_minute', function (event) {\r\n       var select_minute = $(this).closest('.pulldown_group.active').find('.minute');\r\n        setOptionSelectMinute(select_minute, $(this).val());\r\n    });\r\n    // period of time change spacing\r\n    $(document).on(\"change\", '.start_time .spacing_minute', function (event) {\r\n        var select_minute = $(this).closest('.pulldown_group.active .start_time').find('.minute');\r\n        setOptionSelectMinute(select_minute, $(this).val());\r\n    });\r\n    $(document).on(\"change\", '.end_time .spacing_minute', function (event) {\r\n        var select_minute = $(this).closest('.pulldown_group.active .end_time').find('.minute');\r\n        setOptionSelectMinute(select_minute, $(this).val());\r\n    });\r\n}\r\n\r\nfunction setOptionSelectMinute(parent, spacing_value) {\r\n    parent.find('option').not(':first').remove();\r\n    for (var i = 1; i < 60; i++) {\r\n        if (spacing_value == '5') {\r\n            if (i % 5 == 0) {\r\n                parent.append('<option value=\"'+i+'\">' + i + '</option>');\r\n            }\r\n        } else if (spacing_value == '10') {\r\n            if (i % 10 == 0) {\r\n                parent.append('<option value=\"'+i+'\">' + i + '</option>');\r\n            }\r\n        }else if (spacing_value == '15') {\r\n            if (i % 15 == 0) {\r\n                parent.append('<option value=\"'+i+'\">' + i + '</option>');\r\n            }\r\n        }else if (spacing_value == '30') {\r\n            if (i % 30 == 0) {\r\n                parent.append('<option value=\"'+i+'\">' + i + '</option>');\r\n            }\r\n        }else {\r\n            parent.append('<option value=\"'+i+'\">' + i + '</option>');\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction fillDataPulldownProvinces(parent) {\r\n    var pulldown_provinces = common_data['pulldown_provinces'];\r\n    Object.keys(pulldown_provinces).forEach(function (key) {\r\n        var clone = $('.scenario_block_origin .pulldown_box_child .default_pulldown').clone();\r\n        clone.find('.pulldown_label').val(pulldown_provinces[key]);\r\n        parent.find('.pulldown_container').append(clone);\r\n    });\r\n}\r\n\r\nfunction changeTypeTelInput() {\r\n    var tel_input_type = common_data['tel_input_type'],\r\n        one_input = $('.scenario_block_origin .input_box_child .one_input').clone(),\r\n        tel_input_hyphen = $('.scenario_block_origin .input_box_child .tel_input_hyphen').clone(),\r\n        input_clone;\r\n\r\n    $(document).on(\"change\", '.input_box .tel_input_type_select', function (event) {\r\n        var parent = $(this).closest('.input_box');\r\n        parent.find('.input_item').remove();\r\n        if ($(this).val() == tel_input_type[type_tel_no_hyphen]) {\r\n            console.log('khong gach');\r\n            input_clone = one_input;\r\n        }else{\r\n            input_clone = tel_input_hyphen;\r\n        }\r\n        parent.append(input_clone);\r\n        parent.find('.change_input').addClass('hide');\r\n        getDataFromInput();\r\n    });\r\n}\r\n\r\nfunction getMessagePosition(element) {\r\n    var action_group = $(element).parents('.action-group');\r\n    if(action_group.length > 0 && action_group.attr('data-append') == '1'){\r\n        return action_group;\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction changeTypeRadio() {\r\n    var template_radio = common_data['template_radio'];\r\n    $(document).on(\"change\", '.radio_group .radio_type', function (event) {\r\n        var parent = $(this).closest('.radio_group');\r\n        parent.find('.radio_box').remove();\r\n        if ($(this).val() == template_radio[type_image_radio]) {\r\n            addRadioImage();\r\n        }else{\r\n            addRadioBox();\r\n        }\r\n    });\r\n}\r\n\r\nfunction changeNumberImageRadio(btn_change) {\r\n    setTimeout(function(){\r\n        var clone,\r\n            list_item_radio = [];\r\n        btn_change.closest('.radio_box').find('.generic_box_content').each(function (index, item) {\r\n            var image_url = $(item).find('input.image_url').val(),\r\n                comment = $(item).find('input.title').val();\r\n            list_item_radio.push({\r\n                'image_url' : image_url,\r\n                'comment' : comment\r\n            });\r\n        });\r\n        var after_item = btn_change.closest('.radio_box').next(),\r\n            number_item = btn_change.closest('.radio_container').find('.radio_box').length;\r\n\r\n        btn_change.closest('.radio_box').remove();\r\n        if (btn_change.hasClass('increment_to_two') || btn_change.hasClass('decrement_to_two')){\r\n            clone = $('.scenario_block_origin .radio_two_image').clone();\r\n            clone.find('.generic_box_content').each(function (index, item) {\r\n                if (list_item_radio[index] != undefined) {\r\n                    $(item).find('input.image_url').val(list_item_radio[index].image_url);\r\n                    $(item).find('input.title ').val(list_item_radio[index].comment);\r\n                }\r\n            });\r\n        }else if (btn_change.hasClass('decrement_to_one')) {\r\n            clone = $('.scenario_block_origin .radio_image').clone();\r\n            if (list_item_radio[0] != undefined) {\r\n                clone.find('input.image_url').val(list_item_radio[0].image_url);\r\n                clone.find('input.title ').val(list_item_radio[0].comment);\r\n            }\r\n        }else if (btn_change.hasClass('increment_to_three')) {\r\n            clone = $('.scenario_block_origin .radio_three_image').clone();\r\n            clone.find('.generic_box_content').each(function (index, item) {\r\n                if (list_item_radio[index] != undefined) {\r\n                    $(item).find('input.image_url').val(list_item_radio[index].image_url);\r\n                    $(item).find('input.title ').val(list_item_radio[index].comment);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (number_item == 1 || !after_item.hasClass('radio_box')) {\r\n            $('.message_container_input .radio_group.active .radio_container').append(clone);\r\n        }else {\r\n            clone.insertBefore(after_item);\r\n        }\r\n        checkRadioBox();\r\n        getDataFromInput();\r\n    }, 100);\r\n}\r\n\r\nfunction deleteButtonAction() {\r\n    $('.scenario_block .action-group').each(function (i, e) {\r\n        var button_action_next = $(this).next();\r\n        if(button_action_next.hasClass('action-group') || button_action_next.length == 0){\r\n            $(this).remove();\r\n        }\r\n    });\r\n}\r\n\r\nfunction previewCaptcha(parent) {\r\n    var src = '',\r\n        captcha_type = parent.find('.captcha_type').val(),\r\n        size = parent.find('.size').val(),\r\n        captcha_color = parent.find('.captcha_color').val(),\r\n        template_captcha = common_data['template_captcha'];\r\n    parent.find('.preview_captcha').attr('src', '');\r\n    if (captcha_color == 1) {\r\n        captcha_color = true;\r\n    }\r\n    if (captcha_type == template_captcha[type_captcha_only_numbers]) {\r\n        if (captcha_color == true) {\r\n            src = 'http://app.botchan.chat/captchapreview?size='+ size +'&color='+ captcha_color +'&charPreset=1234567890';\r\n        }else {\r\n            src = 'http://app.botchan.chat/captchapreview?size='+ size +'&charPreset=1234567890';\r\n        }\r\n    }else if (captcha_type == template_captcha[type_captcha_only_letters]) {\r\n        if (captcha_color == true) {\r\n            src = 'http://app.botchan.chat/captchapreview?size='+ size +'&color='+ captcha_color +'&charPreset=ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n        }else {\r\n            src = 'http://app.botchan.chat/captchapreview?size='+ size +'&charPreset=ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n        }\r\n    }else {\r\n        if (captcha_color == true) {\r\n            src = 'http://app.botchan.chat/captchapreview?size='+ size +'&color='+ captcha_color +'&charPreset=ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';\r\n        }else {\r\n            src = 'http://app.botchan.chat/captchapreview?size='+ size +'&charPreset=ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';\r\n        }\r\n    }\r\n    parent.find('.preview_captcha').attr('src', src);\r\n}\r\n\r\nfunction checkUseRequiment() {\r\n    var msg_group_content = $('.message_container_input .message_bot_area .fixedsidebar-content');\r\n    var checkbox_requirement_input = $('.message_bot_area .fixedsidebar-content .checkbox_requirement_one');\r\n    // var requirement_one_active = true;\r\n    // var requirement_one_active = false;\r\n    var requirement_one_active = true;\r\n\r\n    //not show if in block message exist any type message below\r\n    if (msg_group_content.find('.type_group').length < 2\r\n     || (msg_group_content.find('.label_group').length && (msg_group_content.find('.input_box').length < 2))\r\n     || msg_group_content.find('.captcha_group').length\r\n     || msg_group_content.find('.terms_of_use_group').length\r\n     || msg_group_content.find('.textarea_box').length\r\n     || msg_group_content.find('.radio_group').length\r\n     || msg_group_content.find('.checkbox_group').length\r\n     || msg_group_content.find('.pulldown_group').length\r\n     || msg_group_content.find('.postal_code_box').length\r\n     || msg_group_content.find('.upload_file_group').length\r\n     || msg_group_content.find('.calendar_group').length\r\n     || msg_group_content.find('.confirmation_group').length\r\n     || msg_group_content.find('.generic_group').length\r\n     || msg_group_content.find('.card_payment_group').length\r\n     || msg_group_content.find('.add_to_cart_group').length\r\n     || msg_group_content.find('.request_document_group').length\r\n     ) {\r\n         requirement_one_active = false;\r\n     }\r\n\r\n    icheck_change_event = false;\r\n    if (requirement_one_active) {\r\n        checkbox_requirement_input.removeClass('hidden');\r\n        if (checkbox_requirement_input[0].checked) {\r\n            //un-check require message checkbox\r\n            icheckAuto('uncheck', msg_group_content.find('.type_group .is_required'));\r\n        }\r\n    } else {\r\n        icheckAuto('uncheck', msg_group_content.find('input.btn_is_input_requiment'));\r\n        checkbox_requirement_input.addClass('hidden');\r\n        msg_group_content.find('.type_group .is_required').show();\r\n    }\r\n    icheck_change_event = true;\r\n}\r\n\r\n//check active requirement input then uncheck and hide input require message\r\nfunction checkActiveRequirementOne() {\r\n    var msg_group_content = $('.message_container_input .message_bot_area .fixedsidebar-content'),\r\n        is_input_requiment = msg_group_content.find('input.btn_is_input_requiment')[0].checked,\r\n        input_required_list = msg_group_content.find('.type_group .is_required');\r\n\r\n    if(is_input_requiment != void 0 && is_input_requiment){\r\n        input_required_list.hide();\r\n        icheckAuto('uncheck', input_required_list);\r\n    }else {\r\n        input_required_list.show();\r\n    }\r\n}\r\n//change template document\r\nfunction changeTypeDocument(){\r\n    $('.request_document_group.active .document_type').on('change', function (e) {\r\n        var parent = $(this).closest('.request_document_group.active');\r\n        demoTemplateDocument(parent);\r\n    });\r\n}\r\n//show/hide for document type\r\nfunction demoTemplateDocument(parent) {\r\n    var template_document = common_data['template_document'];\r\n    parent.find('.image_document').addClass('hide');\r\n    parent.find('.sub_title_document').addClass('hide');\r\n    if (parent.find('.document_type').val() == template_document[type_image_document]) {\r\n        //image, title & subtitle\r\n        parent.find('.image_document').removeClass('hide');\r\n        parent.find('.sub_title_document').removeClass('hide');\r\n    }else if (parent.find('.document_type').val() == template_document[type_title_document]) {\r\n        //title only\r\n        parent.find('.image_document').addClass('hide');\r\n        parent.find('.sub_title_document').addClass('hide');\r\n    }else {\r\n        //title & subtitle\r\n        parent.find('.sub_title_document').removeClass('hide');\r\n    }\r\n}\r\n\r\nfunction btnAddItem() {\r\n    $('.message_bot_area .type_group.active .add_item_common').on('click', function (event) {\r\n        setTimeout(function(){\r\n            var bot_message_type    = botMessageType(),\r\n                type                = common_data['bot_content_type'];\r\n            if(bot_message_type == type[type_radio]) {\r\n                var msg_active = getMessageFormActive(),\r\n                    template_radio = common_data['template_radio'];\r\n                if (msg_active.find('.radio_type').val() == template_radio[type_image_radio]) {\r\n                    addRadioImage();\r\n                }else {\r\n                    addRadioBox();\r\n                }\r\n            } else if(bot_message_type == type[type_checkbox]) {\r\n                addCheckboxBox();\r\n            }else if(bot_message_type == type[type_pulldown]) {\r\n                addItemPulldown();\r\n            }else if(bot_message_type == type[type_terms_of_use]) {\r\n                addItemLink();\r\n            }\r\n        }, 100);\r\n    });\r\n}\r\n\r\nfunction setValMessageType(value) {\r\n    $('.footer_message_input #bot_content_type').val(value);\r\n}\r\n\r\n//check number message in block message\r\nfunction checkTotalMessageInBlock() {\r\n    var message_bot_content = $('.message_bot_area .fixedsidebar-content'),\r\n        msg_in_block_num = message_bot_content.find('.type_group').length;\r\n\r\n    if(!msg_in_block_num) {\r\n        var clone = $('.scenario_block_origin .block_message_empty').clone();\r\n        message_bot_content.append(clone);\r\n    } else {\r\n        message_bot_content.find('.block_message_empty').remove();\r\n    }\r\n    return msg_in_block_num;\r\n}\r\n\r\n$( window ).resize(function() {\r\n    setHeightSlidebar();\r\n});\r\n","/**\r\n * Created by nguyen.khac.tung on 4/19/2017.\r\n */\r\nvar error_class   = 'validation-failed',\r\n    success_class = 'validation-pass',\r\n    bot_content_type = null;\r\n\r\nfunction validation_scenario (service_name, form, bot_message_type) {\r\n    var validation_result   = true,\r\n        validation_msg_list = common_data['validation_msg_list'];\r\n    bot_content_type    = common_data['bot_content_type'];\r\n\r\n    var validate_types = {\r\n        validate_require    : \"validate-require\",\r\n        validate_url        : \"validate-url\",\r\n        validate_url_secure : \"validate-url-secure\",\r\n        validate_max        : \"validate-max\",\r\n        validate_min        : \"validate-min\",\r\n        validate_phone      : \"validate-phone\",\r\n        validate_white_list : \"validate-white-list\",\r\n        validate_number     : \"validate-number\"\r\n    };\r\n    //converse to array\r\n    var validate_value = Object.keys(validate_types).map(function(key) {\r\n        return validate_types[key];\r\n    });\r\n\r\n    clearCrouselError();\r\n\r\n    //check one checkbox is checked then not check other checkbox same name\r\n    var checkbox_name_list = {};\r\n\r\n    $(form.find('input:not(.hidden), textarea:not(.hidden), select:not(.hidden)')).each(function (index, elm) {\r\n        var elm_class = $(elm).attr('class');\r\n\r\n        if(!isEmpty(elm_class)) {\r\n            //clear old validate class\r\n            $(elm).removeClass(error_class);\r\n            $(elm).removeClass(success_class);\r\n            //if is select and using select2\r\n            if(isSelect2(elm)) {\r\n                $(elm).next('.select2').find('.select2-selection').removeClass(error_class).removeClass(success_class);\r\n            }\r\n\r\n            check(elm);\r\n        }\r\n    });\r\n    return validation_result;\r\n\r\n    function check(elm) {\r\n        var result_check    = true;\r\n        var elm_class       = $(elm).attr('class');\r\n        var elm_class_arr   = $(elm).attr('class').split(' ');\r\n        var value           = '';\r\n\r\n\r\n        if($(elm).attr('type') == 'checkbox' || $(elm).attr('type') == 'radio') {\r\n            if(!isEmpty($(elm).attr('name'))) {\r\n                var input_name = $(elm).attr('name');\r\n\r\n                //not check if any checkbox is checked\r\n                if(!isEmpty(checkbox_name_list[input_name]) && checkbox_name_list[input_name]) {\r\n                    return result_check;\r\n                }\r\n                //add input name to checkbox_name_list\r\n                if(isEmpty(checkbox_name_list[input_name])) {\r\n                    checkbox_name_list[input_name] = 0;\r\n                }\r\n                var input_list  = $(elm).parents('.type_group').find('input[name=\"' + input_name + '\"]:checked');\r\n                value           = $.map(input_list, function(c){return c.value;});\r\n\r\n                //set flg 1 for input name. Not check after checkbox checked\r\n                if(!isEmpty(value)) {\r\n                    checkbox_name_list[input_name] = 1;\r\n                }\r\n            } else {\r\n                value       = $(elm)[0].checked;\r\n            }\r\n        } else {\r\n            value           = $(elm).val();\r\n        }\r\n\r\n        //each class check if is validate class and call to check process\r\n        $(elm_class_arr).each(function (i, class_name) {\r\n            var error_code      = '';\r\n            var error_param_msg = {};\r\n            if(result_check == true && validate_value.indexOf(class_name) != -1) {\r\n                if(class_name == validate_types.validate_require && isEmpty(value)) {\r\n                    result_check = !(elm_class_arr.indexOf(validate_types.validate_require) != -1);\r\n\r\n                } else if(class_name != validate_types.validate_require && !isEmpty(value)) {\r\n                    switch (class_name) {\r\n                        //'Please enter a valid URL. Protocol is required (http://, https:// or ftp://)'\r\n                        case validate_types.validate_url :\r\n                            var value_replace = value.replace(/[{}]/g, '');\r\n                            result_check = /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(value_replace);\r\n                            break;\r\n                        //'Please enter a valid URL. Protocol is required (http://, https:// or ftp://)'\r\n                        case validate_types.validate_url_secure :\r\n                            var value_replace = value.replace(/[{}]/g, '');\r\n                            result_check = /^(https):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(value_replace);\r\n                            break;\r\n                        //'Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.'\r\n                        //Origin backup: /^((\\d[-. ]?)?((\\(\\d{3}\\))|\\d{3}))?[-. ]?\\d{3}[-. ]?\\d{4}$/.test(value);\r\n                        case validate_types.validate_phone : result_check = /^\\+?((\\d{1,3}[-. ]?)?((\\(\\d{1,3}\\))|\\d{1,3}))?[-. ]?\\d{1,3}[-. ]?\\d{1,4}$/.test(value);\r\n                            break;\r\n                        //'Text length does not satisfy specified text range.'\r\n                        case validate_types.validate_max :\r\n                            var hasMax = /maximum-length-+[0-9]*/.test(elm_class);\r\n                            if (hasMax) {\r\n                                var reMax       = elm_class.match(/maximum-length-+[0-9]*/).toString(),\r\n                                    length      = reMax.split('-')[2];\r\n                                if(value.length > length) {\r\n                                    result_check = false;\r\n                                    error_param_msg['max'] = length;\r\n                                }\r\n                            }\r\n                            break;\r\n                        case validate_types.validate_min :\r\n                            var hasMin = /minimum-length-+[0-9]*/.test(elm_class);\r\n                            if (hasMin) {\r\n                                var reMin       = elm_class.match(/minimum-length-+[0-9]*/).toString(),\r\n                                    length      = reMin.split('-')[2];\r\n                                if(value.length < length) {\r\n                                    result_check = false;\r\n                                    error_param_msg['min'] = length;\r\n                                }\r\n                            }\r\n                            break;\r\n                        case validate_types.validate_white_list :\r\n                            var white_list_domain   = common_data['white_list_domain'];\r\n\r\n                            if(white_list_domain != void 0 && white_list_domain.length) {\r\n                                var result_input    = false;\r\n                                $(white_list_domain).each(function (i, domain) {\r\n                                    if(domain != '' && domain != void 0 && domain != null) {\r\n                                        var reg                = /[a-z0-9]+\\.*[a-z0-9]+\\.[a-z]+/,\r\n                                            white_domain_clear = domain.match(reg),\r\n                                            value_clear        = value.match(reg);\r\n                                        if(value_clear.toString() == white_domain_clear.toString()) {\r\n                                            result_input = true;\r\n                                        }\r\n                                    }\r\n                                });\r\n                                if(!result_input) {\r\n                                    result_check = false;\r\n                                }\r\n                            }\r\n                            break;\r\n                        case validate_types.validate_number : result_check = !isNaN(value) && /^\\s*-?\\d*(\\.\\d*)?\\s*$/.test(value);\r\n                            break;\r\n                    }\r\n                }\r\n                //remove old error\r\n                clearMsg(elm);\r\n                if(!result_check) {\r\n                    error_code = class_name;\r\n                    validate_view(elm, result_check, error_code, error_param_msg);\r\n\r\n                    //show error in Carousel slide\r\n                    showErrorCarouselItem(service_name, elm, bot_message_type);\r\n                }\r\n            }\r\n        });\r\n        return result_check;\r\n    }\r\n\r\n    function isEmpty(v) {\r\n        return (v == '' || (v == null) || (v.length == 0) || /^\\s+$/.test(v));\r\n    }\r\n\r\n    /**\r\n     * Actions with validate input\r\n     * @param elm\r\n     * @param result_check\r\n     * @param error_code\r\n     * @param error_param_msg\r\n     */\r\n    function validate_view(elm, result_check, error_code, error_param_msg) {\r\n        if($(elm).length) {\r\n            //add message if is error or clear error class if not error\r\n            if (!result_check) {\r\n                validation_result = false;\r\n                //set error class for that elm\r\n                $(elm).addClass(error_class);\r\n                //add message\r\n                if(!isEmpty(error_code)) {\r\n                    error_code = error_code.replace(/-/g, '_');\r\n                    var msg = error_code;\r\n                    if(!isEmpty(validation_msg_list) && !isEmpty(validation_msg_list[error_code])) {\r\n                        //replace attribute message by value\r\n                        msg = setParamMessage(error_param_msg, validation_msg_list[error_code]);\r\n                    }\r\n                    var error_element = \"<label class='error'>\" + msg + \"</label>\";\r\n\r\n                    //if is select using select2\r\n                    if(isSelect2(elm)) {\r\n                        //set border for select2\r\n                        $(elm).next('.select2').find('.select2-selection').addClass(error_class);\r\n                        //set message after select2\r\n                        $(elm).next('.select2').after(error_element);\r\n                    } else {\r\n                        if($(elm).attr('type') == 'checkbox' || $(elm).attr('type') == 'radio') {\r\n                            var input_type = $(elm).attr('type');\r\n\r\n                            $(elm).parents('.' + input_type + '_box').append(error_element);\r\n                        } else {\r\n                            $(elm).after(error_element);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                $(elm).addClass(success_class);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear message\r\n     * @param elm\r\n     */\r\n    function clearMsg(elm) {\r\n        $(elm).parent().find('label.error').remove();\r\n\r\n        if($(elm).attr('type') == 'checkbox' || $(elm).attr('type') == 'radio') {\r\n            var input_type = $(elm).attr('type');\r\n            $(elm).parents('.' + input_type + '_box').find('label.error').remove();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear error carousel slide\r\n     */\r\n    function clearCrouselError() {\r\n        $('.scenario-edit .message_bot_area .footer_message_input .carousel_indicator_item li').removeClass(error_class);\r\n    }\r\n\r\n    /**\r\n     * set value for attribute code in string\r\n     * @param param\r\n     * @param str\r\n     * @returns {*}\r\n     */\r\n    function setParamMessage(param, str) {\r\n        if(!isEmpty(param) && typeof param == 'object') {\r\n            $.each(param, function(code, value) {\r\n                if(!isEmpty(value)) {\r\n                    code = ':' + code;\r\n                    var re = new RegExp(code, \"g\");\r\n                    str = str.replace(re, value);\r\n                }\r\n            });\r\n        }\r\n        return str;\r\n    }\r\n}\r\n\r\n/**\r\n * Show error in Carousel slide\r\n */\r\nfunction showErrorCarouselItem(service_name, elm, bot_message_type) {\r\n    if(bot_content_type != null) {\r\n        var carousel_type = '';\r\n        switch (service_name) {\r\n            case 'facebook' : carousel_type = bot_content_type[type_generic]; break;\r\n            case 'line' : carousel_type = bot_content_type[type_carousel]; break;\r\n        }\r\n\r\n        if(bot_message_type == carousel_type) {\r\n            var elm_index = $(elm).parents('.generic_box.item').index(),\r\n                elm_dot   = $('.scenario-edit .message_bot_area .footer_message_input .carousel_indicator_item li').eq(elm_index);\r\n            if(!elm_dot.hasClass(error_class)) {\r\n                elm_dot.addClass(error_class);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction isSelect2(elm) {\r\n    if($(elm).hasClass('select2-hidden-accessible') && $(elm).next('.select2').length) {\r\n        return true;\r\n    }\r\n    return false;\r\n}"]}